<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2-Year Electric Guitar Curriculum: Blues/Rock Focus</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            min-height: 100vh;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }

        header {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 2rem;
            text-align: center;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255,255,255,0.2);
            border-radius: 4px;
            margin-top: 1rem;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #e74c3c, #f39c12, #27ae60);
            width: 0%;
            transition: width 0.3s ease;
            border-radius: 4px;
        }

        .main-content {
            display: flex;
            min-height: calc(100vh - 120px);
        }

        .sidebar {
            width: 300px;
            background: #f8f9fa;
            border-right: 1px solid #dee2e6;
            overflow-y: auto;
            max-height: calc(100vh - 120px);
            position: sticky;
            top: 120px;
        }

        .mobile-toggle {
            display: none;
            background: #3498db;
            color: white;
            border: none;
            padding: 0.8rem;
            width: 100%;
            cursor: pointer;
            font-size: 1rem;
        }

        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                position: fixed;
                top: 120px;
                left: -100%;
                z-index: 200;
                transition: left 0.3s ease;
                max-height: calc(100vh - 120px);
            }
            
            .sidebar.mobile-open {
                left: 0;
            }
            
            .mobile-toggle {
                display: block;
            }
            
            .content-area {
                width: 100%;
            }
        }

        .nav-section {
            padding: 1rem;
        }

        .nav-section h3 {
            color: #2c3e50;
            margin-bottom: 0.5rem;
            font-size: 1.1rem;
            border-bottom: 2px solid #3498db;
            padding-bottom: 0.3rem;
        }

        .phase-nav {
            margin-bottom: 1.5rem;
        }

        .phase-title {
            background: #3498db;
            color: white;
            padding: 0.5rem;
            border-radius: 4px;
            font-weight: bold;
            cursor: pointer;
            margin-bottom: 0.5rem;
            transition: background 0.3s;
        }

        .phase-title:hover {
            background: #2980b9;
        }

        .week-list {
            display: none;
            padding-left: 1rem;
        }

        .week-list.active {
            display: block;
        }

        .week-item {
            padding: 0.3rem 0.5rem;
            cursor: pointer;
            border-radius: 3px;
            margin-bottom: 0.2rem;
            transition: background 0.2s;
            font-size: 0.9rem;
        }

        .week-item:hover {
            background: #e9ecef;
        }

        .week-item.completed {
            background: #d4edda;
            color: #155724;
        }

        .week-item.current {
            background: #fff3cd;
            color: #856404;
            font-weight: bold;
        }

        .content-area {
            flex: 1;
            padding: 2rem;
            overflow-y: auto;
        }

        .overview-section {
            background: #f8f9fa;
            padding: 2rem;
            border-radius: 8px;
            margin-bottom: 2rem;
            border-left: 4px solid #3498db;
        }

        .week-content {
            display: none;
            animation: fadeIn 0.3s ease-in;
        }

        .week-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .week-header {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 1.5rem;
        }

        .week-title {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .week-subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .practice-section {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .practice-section h4 {
            color: #2c3e50;
            margin-bottom: 1rem;
            font-size: 1.3rem;
            border-bottom: 2px solid #e9ecef;
            padding-bottom: 0.5rem;
        }

        .practice-item {
            background: #f8f9fa;
            border-radius: 6px;
            padding: 1rem;
            margin-bottom: 1rem;
            border-left: 4px solid #3498db;
            transition: all 0.2s ease;
        }

        .practice-item:hover {
            background: #e9ecef;
            transform: translateY(-1px);
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .practice-time {
            font-weight: bold;
            color: #e74c3c;
            margin-bottom: 0.3rem;
        }

        .goals-section {
            background: #e8f5e8;
            border: 1px solid #c3e6c3;
            border-radius: 6px;
            padding: 1rem;
            margin-top: 1rem;
        }

        .goals-section h5 {
            color: #27ae60;
            margin-bottom: 0.5rem;
        }

        .track-info {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 6px;
            padding: 1rem;
            margin-top: 1rem;
        }

        .track-info h5 {
            color: #856404;
            margin-bottom: 0.5rem;
        }

        .week-navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 2rem;
            padding-top: 1rem;
            border-top: 1px solid #dee2e6;
        }

        .nav-btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s;
        }

        .nav-btn:hover {
            background: #2980b9;
            transform: translateY(-1px);
        }

        .nav-btn:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
            transform: none;
        }

        .complete-week-btn {
            background: #27ae60;
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1.1rem;
            margin-top: 1rem;
            transition: all 0.3s;
        }

        .complete-week-btn:hover {
            background: #219a52;
            transform: translateY(-1px);
        }

        .stats-section {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 1rem;
            border-radius: 6px;
            margin-bottom: 1rem;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 1rem;
            text-align: center;
        }

        .stat-item {
            background: rgba(255,255,255,0.1);
            padding: 0.8rem;
            border-radius: 4px;
        }

        .stat-number {
            font-size: 1.5rem;
            font-weight: bold;
            display: block;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .chord-diagram {
            margin-bottom: 1.5rem;
            background: #ffffff;
            border: 1px solid #e9ecef;
            border-radius: 6px;
            padding: 1rem;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .chord-diagram h5 {
            color: #2c3e50;
            margin-bottom: 0.5rem;
            font-size: 1.1rem;
            border-bottom: 1px solid #e9ecef;
            padding-bottom: 0.3rem;
        }

        .chord-diagram pre {
            font-family: 'Courier New', monospace;
            font-size: 0.85rem;
            line-height: 1.3;
            background: #f8f9fa;
            padding: 1rem;
            border-radius: 4px;
            border: 1px solid #dee2e6;
            overflow-x: auto;
            margin: 0;
            color: #2c3e50;
        }

        .milestone-highlight {
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 50%, #fecfef 100%);
            color: white;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1rem 0;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .milestone-highlight h5 {
            margin-bottom: 0.5rem;
            font-size: 1.3rem;
        }

        .technique-highlight {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 6px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #ffd700;
        }

        .week-progress {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #3498db;
            color: white;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            z-index: 1000;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .week-progress:hover {
            transform: scale(1.1);
            background: #2980b9;
        }

        .overview-content {
            display: block;
        }

        .phase-overview {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .phase-overview h3 {
            color: #2c3e50;
            margin-bottom: 1rem;
            border-bottom: 2px solid #3498db;
            padding-bottom: 0.5rem;
        }

        ul {
            margin-left: 1.5rem;
            margin-bottom: 1rem;
        }

        li {
            margin-bottom: 0.3rem;
        }

        /* Timer Styles */
        .practice-timer {
            background: #e8f5e8;
            border-radius: 8px;
            padding: 1rem;
            margin-top: 1rem;
            border: 1px solid #c3e6c3;
        }

        .timer-controls {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
            flex-wrap: wrap;
        }

        .timer-btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.2s;
        }

        .timer-btn:hover {
            background: #2980b9;
            transform: translateY(-1px);
        }

        .timer-btn:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
            transform: none;
        }

        .timer-display {
            font-size: 1.8rem;
            font-weight: bold;
            text-align: center;
            color: #2c3e50;
            margin: 0.5rem 0;
        }

        .progress-ring {
            width: 60px;
            height: 60px;
            margin: 0 auto;
        }

        .progress-ring-circle {
            stroke: #e9ecef;
            stroke-width: 4;
            fill: transparent;
            stroke-dasharray: 188.5;
            stroke-dashoffset: 0;
        }

        .progress-ring-progress {
            stroke: #3498db;
            stroke-width: 4;
            fill: transparent;
            stroke-dasharray: 188.5;
            stroke-dashoffset: 188.5;
            transition: stroke-dashoffset 0.5s;
            transform: rotate(-90deg);
            transform-origin: 50% 50%;
        }

        .timer-settings {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
            border: 1px solid #dee2e6;
        }

        .timer-presets {
            display: flex;
            gap: 0.5rem;
            margin: 0.5rem 0;
            flex-wrap: wrap;
        }

        .preset-btn {
            background: white;
            border: 1px solid #dee2e6;
            padding: 0.3rem 0.6rem;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.2s;
        }

        .preset-btn:hover {
            background: #e9ecef;
            border-color: #3498db;
        }

        .session-timer {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #2c3e50;
            color: white;
            padding: 1rem;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            z-index: 1000;
            min-width: 150px;
            text-align: center;
        }

        .timer-notification {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
            z-index: 10001;
            text-align: center;
            max-width: 400px;
        }

        /* Dark Mode Styles */
        .dark-mode {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: #ecf0f1;
        }

        .dark-mode .container {
            background: #2c3e50;
            color: #ecf0f1;
        }

        .dark-mode .sidebar {
            background: #34495e;
            border-right-color: #4a6741;
        }

        .dark-mode .practice-section {
            background: #34495e;
            border-color: #4a6741;
            color: #ecf0f1;
        }

        .dark-mode .chord-diagram {
            background: #34495e;
            border-color: #4a6741;
        }

        .dark-mode .chord-diagram pre {
            background: #2c3e50;
            border-color: #4a6741;
            color: #ecf0f1;
        }

        .dark-mode .goals-section {
            background: #34495e;
            border-color: #4a6741;
            color: #ecf0f1;
        }

        .dark-mode .track-info {
            background: #34495e;
            border-color: #4a6741;
            color: #ecf0f1;
        }

        .dark-mode .practice-item {
            background: #2c3e50;
            border-left-color: #3498db;
        }

        .dark-mode .practice-item:hover {
            background: #34495e;
        }

        .dark-mode .week-item:hover {
            background: #4a6741;
            color: #ecf0f1;
        }

        .dark-mode .week-item.completed {
            background: #27ae60;
            color: white;
        }

        .dark-mode .week-item.current {
            background: #f39c12;
            color: white;
        }

        .dark-mode .overview-section {
            background: #34495e;
            border-left-color: #3498db;
            color: #ecf0f1;
        }

        .dark-mode .phase-overview {
            background: #34495e;
            border-color: #4a6741;
            color: #ecf0f1;
        }

        .dark-mode .timer-settings {
            background: #34495e;
            border-color: #4a6741;
            color: #ecf0f1;
        }

        .dark-mode .preset-btn {
            background: #2c3e50;
            border-color: #4a6741;
            color: #ecf0f1;
        }

        .dark-mode .preset-btn:hover {
            background: #4a6741;
            color: white;
        }

        .dark-mode .practice-time {
            color: #f39c12;
            font-weight: bold;
        }

        .dark-mode .week-title {
            color: #ecf0f1;
        }

        .dark-mode .week-subtitle {
            color: #bdc3c7;
        }

        .dark-mode input,
        .dark-mode select,
        .dark-mode textarea {
            background: #34495e;
            color: #ecf0f1;
            border-color: #4a6741;
        }

        .dark-mode input:focus,
        .dark-mode select:focus,
        .dark-mode textarea:focus {
            border-color: #3498db;
            box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);
        }

        /* Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 10000;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1rem;
        }

        .modal-content {
            background: white;
            border-radius: 8px;
            max-width: 600px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
            padding: 0;
        }

        .dark-mode .modal-content {
            background: #34495e;
            color: #ecf0f1;
        }

        .modal-header {
            padding: 1.5rem;
            border-bottom: 1px solid #dee2e6;
            background: #f8f9fa;
            border-radius: 8px 8px 0 0;
        }

        .dark-mode .modal-header {
            background: #2c3e50;
            border-bottom-color: #4a6741;
        }

        .modal-body {
            padding: 1.5rem;
        }

        .modal-footer {
            padding: 1rem 1.5rem;
            border-top: 1px solid #dee2e6;
            background: #f8f9fa;
            border-radius: 0 0 8px 8px;
            text-align: right;
        }

        .dark-mode .modal-footer {
            background: #2c3e50;
            border-top-color: #4a6741;
        }

        /* Form Styles */
        .form-group {
            margin-bottom: 1rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: bold;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 0.5rem;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            font-size: 1rem;
        }

        .form-group textarea {
            min-height: 100px;
            resize: vertical;
        }

        /* Progress Log Styles */
        .progress-log-day {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.5rem;
            border-bottom: 1px solid #eee;
        }

        .progress-log-day:last-child {
            border-bottom: none;
        }

        .practice-time-badge {
            background: #27ae60;
            color: white;
            padding: 0.2rem 0.5rem;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .no-practice-badge {
            background: #6c757d;
            color: white;
            padding: 0.2rem 0.5rem;
            border-radius: 12px;
            font-size: 0.8rem;
        }

        /* Responsive Design */
        @media (max-width: 480px) {
            .timer-controls {
                flex-direction: column;
                gap: 0.3rem;
            }
            
            .timer-btn {
                width: 100%;
                padding: 0.6rem;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
                gap: 0.5rem;
            }
            
            .chord-diagram pre {
                font-size: 0.7rem;
                padding: 0.6rem;
            }
            
            .practice-timer {
                padding: 0.8rem;
            }
            
            .timer-display {
                font-size: 1.5rem;
            }
            
            .session-timer {
                top: 5px;
                right: 5px;
                padding: 0.6rem;
                min-width: 140px;
            }
            
            .week-progress {
                bottom: 5px;
                right: 5px;
                width: 45px;
                height: 45px;
                font-size: 0.8rem;
            }
        }

        /* Focus and Accessibility */
        button:focus, 
        .nav-btn:focus, 
        .timer-btn:focus,
        .complete-week-btn:focus,
        .preset-btn:focus {
            outline: 2px solid #3498db;
            outline-offset: 2px;
            box-shadow: 0 0 0 4px rgba(52, 152, 219, 0.2);
        }

        /* Loading states */
        .loading {
            opacity: 0.6;
            pointer-events: none;
            position: relative;
        }

        .loading::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 20px;
            height: 20px;
            margin: -10px 0 0 -10px;
            border: 2px solid #3498db;
            border-radius: 50%;
            border-top-color: transparent;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Milestone celebrations */
        .milestone-celebration {
            animation: celebrate 0.6s ease-out;
            border: 3px solid gold;
            box-shadow: 0 0 30px rgba(255, 215, 0, 0.5);
        }
        
        @keyframes celebrate {
            0% { transform: translate(-50%, -50%) scale(0.5) rotate(-10deg); opacity: 0; }
            50% { transform: translate(-50%, -50%) scale(1.1) rotate(5deg); }
            100% { transform: translate(-50%, -50%) scale(1) rotate(0deg); opacity: 1; }
        }

        /* Message styles */
        .error-message {
            background: #e74c3c;
            color: white;
            padding: 1rem;
            border-radius: 6px;
            margin: 1rem 0;
            text-align: center;
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 10001;
            max-width: 400px;
        }
        
        .success-message {
            background: #27ae60;
            color: white;
            padding: 1rem;
            border-radius: 6px;
            margin: 1rem 0;
            text-align: center;
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 10001;
            max-width: 400px;
        }

        .info-message {
            background: #3498db;
            color: white;
            padding: 1rem;
            border-radius: 6px;
            margin: 1rem 0;
            text-align: center;
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 10001;
            max-width: 400px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üé∏ 2-Year Electric Guitar Curriculum</h1>
            <p>Blues/Rock Focus - Complete Learning Path</p>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
        </header>

        <button class="mobile-toggle" onclick="toggleSidebar()">
            üìã Navigate Weeks
        </button>

        <div class="main-content">
            <aside class="sidebar" id="sidebar">
                <div class="nav-section">
                    <div class="stats-section">
                        <div class="stats-grid">
                            <div class="stat-item">
                                <span class="stat-number" id="completedWeeks">0</span>
                                <span class="stat-label">Completed</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-number" id="currentWeek">1</span>
                                <span class="stat-label">Current Week</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-number" id="progressPercent">0%</span>
                                <span class="stat-label">Progress</span>
                            </div>
                        </div>
                    </div>

                    <h3>üîç Search & Filters</h3>
                    <div style="margin-bottom: 1rem;">
                        <input type="text" id="searchInput" placeholder="Search weeks..." style="width: 100%; padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px; margin-bottom: 0.5rem;">
                        <select id="phaseFilter" style="width: 100%; padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px; margin-bottom: 0.5rem;">
                            <option value="">All Phases</option>
                            <option value="1-8">Phase 1: Getting Started</option>
                            <option value="9-16">Phase 2: Scale Introduction</option>
                            <option value="17-24">Phase 3: Chord Expansion</option>
                            <option value="25-32">Phase 4: Lead Development</option>
                            <option value="33-40">Phase 5: Song Application</option>
                            <option value="41-52">Phase 6: Intermediate Prep</option>
                            <option value="53-60">Phase 7: Advanced Rhythm</option>
                            <option value="61-68">Phase 8: Scale Mastery</option>
                            <option value="69-76">Phase 9: Advanced Lead</option>
                            <option value="77-84">Phase 10: Song Complexity</option>
                            <option value="85-92">Phase 11: Music Theory</option>
                            <option value="93-104">Phase 12: Performance</option>
                        </select>
                        <button class="nav-btn" onclick="clearFilters()" style="width: 100%; background: #6c757d;">Clear Filters</button>
                    </div>

                    <h3>üóìÔ∏è Quick Navigation</h3>
                    <div style="margin-bottom: 1rem;">
                        <button class="nav-btn" onclick="showOverview()" style="width: 100%; margin-bottom: 0.5rem;">üìñ Curriculum Overview</button>
                        <button class="nav-btn" onclick="goToCurrentWeek()" style="width: 100%; margin-bottom: 0.5rem;">üéØ Go to Current Week</button>
                        <button class="nav-btn" onclick="showProgressStats()" style="width: 100%; margin-bottom: 0.5rem; background: #9b59b6;">üìä Progress Stats</button>
                        <button class="nav-btn" onclick="showPracticeLog()" style="width: 100%; margin-bottom: 0.5rem; background: #8e44ad;">üìà Practice Log</button>
                        <button class="nav-btn" onclick="showGoalSetting()" style="width: 100%; margin-bottom: 0.5rem; background: #e67e22;">üéØ Set Goals</button>
                        <button class="nav-btn" onclick="showTroubleshooting()" style="width: 100%; margin-bottom: 0.5rem; background: #e74c3c;">üîß Help & Tips</button>
                        <button class="nav-btn" onclick="toggleDarkMode()" style="width: 100%; margin-bottom: 0.5rem; background: #34495e;"><span id="darkModeIcon">üåô</span> Dark Mode</button>
                    </div>
                </div>

                <!-- Year 1 Navigation -->
                <div class="nav-section">
                    <h3>üìÖ Year 1: Foundation Building</h3>
                    
                    <div class="phase-nav">
                        <div class="phase-title" onclick="togglePhase('phase1')">
                            Phase 1: Getting Started (Weeks 1-8)
                        </div>
                        <div class="week-list" id="phase1">
                            <div class="week-item" onclick="showWeek(1)">Week 1: Basic Setup & E Major</div>
                            <div class="week-item" onclick="showWeek(2)">Week 2: A Major & First Changes</div>
                            <div class="week-item" onclick="showWeek(3)">Week 3: D Major & Power Chords</div>
                            <div class="week-item" onclick="showWeek(4)">Week 4: Power Chord Expansion</div>
                            <div class="week-item" onclick="showWeek(5)">Week 5: Rhythm Foundation</div>
                            <div class="week-item" onclick="showWeek(6)">Week 6: Up-stroke Introduction</div>
                            <div class="week-item" onclick="showWeek(7)">Week 7: Minor Chords</div>
                            <div class="week-item" onclick="showWeek(8)">Week 8: 12-Bar Blues Foundation</div>
                        </div>
                    </div>

                    <div class="phase-nav">
                        <div class="phase-title" onclick="togglePhase('phase2')">
                            Phase 2: Scale Introduction (Weeks 9-16)
                        </div>
                        <div class="week-list" id="phase2">
                            <div class="week-item" onclick="showWeek(9)">Week 9: A Minor Pentatonic</div>
                            <div class="week-item" onclick="showWeek(10)">Week 10: Simple Pentatonic Licks</div>
                            <div class="week-item" onclick="showWeek(11)">Week 11: Alternate Picking</div>
                            <div class="week-item" onclick="showWeek(12)">Week 12: Lead Guitar Posture</div>
                            <div class="week-item" onclick="showWeek(13)">Week 13: E Minor Pentatonic</div>
                            <div class="week-item" onclick="showWeek(14)">Week 14: Connecting Positions</div>
                            <div class="week-item" onclick="showWeek(15)">Week 15: Blues Scale Introduction</div>
                            <div class="week-item" onclick="showWeek(16)">Week 16: Classic Blues Licks</div>
                        </div>
                    </div>

                    <div class="phase-nav">
                        <div class="phase-title" onclick="togglePhase('phase3')">
                            Phase 3: Chord Expansion (Weeks 17-24)
                        </div>
                        <div class="week-list" id="phase3">
                            <div class="week-item" onclick="showWeek(17)">Week 17: F Major Barre Prep</div>
                            <div class="week-item" onclick="showWeek(18)">Week 18: 6th String Barre Chords</div>
                            <div class="week-item" onclick="showWeek(19)">Week 19: 5th String Barre Chords</div>
                            <div class="week-item" onclick="showWeek(20)">Week 20: Minor Barre Chords</div>
                            <div class="week-item" onclick="showWeek(21)">Week 21: Dominant 7th Chords</div>
                            <div class="week-item" onclick="showWeek(22)">Week 22: Extended Chords</div>
                            <div class="week-item" onclick="showWeek(23)">Week 23: Advanced Rhythm</div>
                            <div class="week-item" onclick="showWeek(24)">Week 24: Muted Strums</div>
                        </div>
                    </div>

                    <div class="phase-nav">
                        <div class="phase-title" onclick="togglePhase('phase4')">
                            Phase 4: Lead Development (Weeks 25-32)
                        </div>
                        <div class="week-list" id="phase4">
                            <div class="week-item" onclick="showWeek(25)">Week 25: Half-Step Bending</div>
                            <div class="week-item" onclick="showWeek(26)">Week 26: Full-Step Bending</div>
                            <div class="week-item" onclick="showWeek(27)">Week 27: Vibrato Technique</div>
                            <div class="week-item" onclick="showWeek(28)">Week 28: Bends + Vibrato</div>
                            <div class="week-item" onclick="showWeek(29)">Week 29: Hammer-ons & Pull-offs</div>
                            <div class="week-item" onclick="showWeek(30)">Week 30: Advanced Legato</div>
                            <div class="week-item" onclick="showWeek(31)">Week 31: Slides & Grace Notes</div>
                            <div class="week-item" onclick="showWeek(32)">Week 32: Double Stops & Octaves</div>
                        </div>
                    </div>

                    <div class="phase-nav">
                        <div class="phase-title" onclick="togglePhase('phase5')">
                            Phase 5: Song Application (Weeks 33-40)
                        </div>
                        <div class="week-list" id="phase5">
                            <div class="week-item" onclick="showWeek(33)">Week 33: "Smoke on the Water"</div>
                            <div class="week-item" onclick="showWeek(34)">Week 34: "Wild Thing"</div>
                            <div class="week-item" onclick="showWeek(35)">Week 35: "Sweet Home Chicago"</div>
                            <div class="week-item" onclick="showWeek(36)">Week 36: Basic Blues Improvisation</div>
                            <div class="week-item" onclick="showWeek(37)">Week 37: "Louie Louie"</div>
                            <div class="week-item" onclick="showWeek(38)">Week 38: "Gloria"</div>
                            <div class="week-item" onclick="showWeek(39)">Week 39: Rhythm/Lead Combination</div>
                            <div class="week-item" onclick="showWeek(40)">Week 40: Jam Session Skills</div>
                        </div>
                    </div>

                    <div class="phase-nav">
                        <div class="phase-title" onclick="togglePhase('phase6')">
                            Phase 6: Intermediate Prep (Weeks 41-52)
                        </div>
                        <div class="week-list" id="phase6">
                            <div class="week-item" onclick="showWeek(41)">Week 41: Major Scale Introduction</div>
                            <div class="week-item" onclick="showWeek(42)">Week 42: Major Scale Positions</div>
                            <div class="week-item" onclick="showWeek(43)">Week 43: Dorian Mode</div>
                            <div class="week-item" onclick="showWeek(44)">Week 44: Mixolydian Mode</div>
                            <div class="week-item" onclick="showWeek(45)">Week 45: Add9, Sus2, Sus4</div>
                            <div class="week-item" onclick="showWeek(46)">Week 46: 9th & 11th Chords</div>
                            <div class="week-item" onclick="showWeek(47)">Week 47: Overdrive/Distortion</div>
                            <div class="week-item" onclick="showWeek(48)">Week 48: Delay & Reverb</div>
                            <div class="week-item" onclick="showWeek(49)">Week 49: "Pride and Joy"</div>
                            <div class="week-item" onclick="showWeek(50)">Week 50: "Crossroads"</div>
                            <div class="week-item" onclick="showWeek(51)">Week 51: Year 1 Review</div>
                            <div class="week-item" onclick="showWeek(52)">Week 52: Performance Prep</div>
                        </div>
                    </div>
                </div>

                <!-- Year 2 Navigation -->
                <div class="nav-section">
                    <h3>üìÖ Year 2: Intermediate Development</h3>
                    
                    <div class="phase-nav">
                        <div class="phase-title" onclick="togglePhase('phase7')">
                            Phase 7: Advanced Rhythm (Weeks 53-60)
                        </div>
                        <div class="week-list" id="phase7">
                            <div class="week-item" onclick="showWeek(53)">Week 53: Complex Strumming</div>
                            <div class="week-item" onclick="showWeek(54)">Week 54: Reggae & Ska</div>
                            <div class="week-item" onclick="showWeek(55)">Week 55: Fingerpicking Intro</div>
                            <div class="week-item" onclick="showWeek(56)">Week 56: Travis Picking</div>
                            <div class="week-item" onclick="showWeek(57)">Week 57: Advanced Power Chords</div>
                            <div class="week-item" onclick="showWeek(58)">Week 58: Punk/Metal Rhythms</div>
                            <div class="week-item" onclick="showWeek(59)">Week 59: Band Context</div>
                            <div class="week-item" onclick="showWeek(60)">Week 60: Embellishments</div>
                        </div>
                    </div>

                    <div class="phase-nav">
                        <div class="phase-title" onclick="togglePhase('phase8')">
                            Phase 8: Scale Mastery (Weeks 61-68)
                        </div>
                        <div class="week-list" id="phase8">
                            <div class="week-item" onclick="showWeek(61)">Week 61: Complete Pentatonic</div>
                            <div class="week-item" onclick="showWeek(62)">Week 62: Pentatonic Sequences</div>
                            <div class="week-item" onclick="showWeek(63)">Week 63: 7 Major Positions</div>
                            <div class="week-item" onclick="showWeek(64)">Week 64: Position Connectivity</div>
                            <div class="week-item" onclick="showWeek(65)">Week 65: Dorian Applications</div>
                            <div class="week-item" onclick="showWeek(66)">Week 66: Mixolydian Applications</div>
                            <div class="week-item" onclick="showWeek(67)">Week 67: Scale Choice</div>
                            <div class="week-item" onclick="showWeek(68)">Week 68: Improvisation Concepts</div>
                        </div>
                    </div>

                    <div class="phase-nav">
                        <div class="phase-title" onclick="togglePhase('phase9')">
                            Phase 9: Advanced Lead (Weeks 69-76)
                        </div>
                        <div class="week-list" id="phase9">
                            <div class="week-item" onclick="showWeek(69)">Week 69: Advanced Bending</div>
                            <div class="week-item" onclick="showWeek(70)">Week 70: Harmony Bends</div>
                            <div class="week-item" onclick="showWeek(71)">Week 71: Speed Development</div>
                            <div class="week-item" onclick="showWeek(72)">Week 72: Economy Picking</div>
                            <div class="week-item" onclick="showWeek(73)">Week 73: Vibrato Mastery</div>
                            <div class="week-item" onclick="showWeek(74)">Week 74: Vibrato Types</div>
                            <div class="week-item" onclick="showWeek(75)">Week 75: Phrasing</div>
                            <div class="week-item" onclick="showWeek(76)">Week 76: Melodic Development</div>
                        </div>
                    </div>

                    <div class="phase-nav">
                        <div class="phase-title" onclick="togglePhase('phase10')">
                            Phase 10: Song Complexity (Weeks 77-84)
                        </div>
                        <div class="week-list" id="phase10">
                            <div class="week-item" onclick="showWeek(77)">Week 77: "Layla"</div>
                            <div class="week-item" onclick="showWeek(78)">Week 78: "Sultans of Swing"</div>
                            <div class="week-item" onclick="showWeek(79)">Week 79: "The Thrill is Gone"</div>
                            <div class="week-item" onclick="showWeek(80)">Week 80: "Red House"</div>
                            <div class="week-item" onclick="showWeek(81)">Week 81: "Paranoid"</div>
                            <div class="week-item" onclick="showWeek(82)">Week 82: "Iron Man"</div>
                            <div class="week-item" onclick="showWeek(83)">Week 83: Rhythm/Lead Simultaneity</div>
                            <div class="week-item" onclick="showWeek(84)">Week 84: Loop Pedal Concepts</div>
                        </div>
                    </div>

                    <div class="phase-nav">
                        <div class="phase-title" onclick="togglePhase('phase11')">
                            Phase 11: Music Theory (Weeks 85-92)
                        </div>
                        <div class="week-list" id="phase11">
                            <div class="week-item" onclick="showWeek(85)">Week 85: Chord Construction</div>
                            <div class="week-item" onclick="showWeek(86)">Week 86: Substitutions</div>
                            <div class="week-item" onclick="showWeek(87)">Week 87: Roman Numerals</div>
                            <div class="week-item" onclick="showWeek(88)">Week 88: Secondary Dominants</div>
                            <div class="week-item" onclick="showWeek(89)">Week 89: Lead Sheet Reading</div>
                            <div class="week-item" onclick="showWeek(90)">Week 90: Fake Books</div>
                            <div class="week-item" onclick="showWeek(91)">Week 91: Basic Songwriting</div>
                            <div class="week-item" onclick="showWeek(92)">Week 92: Writing Riffs</div>
                        </div>
                    </div>

                    <div class="phase-nav">
                        <div class="phase-title" onclick="togglePhase('phase12')">
                            Phase 12: Performance & Mastery (Weeks 93-104)
                        </div>
                        <div class="week-list" id="phase12">
                            <div class="week-item" onclick="showWeek(93)">Week 93: Stage Preparation</div>
                            <div class="week-item" onclick="showWeek(94)">Week 94: Stage Presence</div>
                            <div class="week-item" onclick="showWeek(95)">Week 95: Recording Basics</div>
                            <div class="week-item" onclick="showWeek(96)">Week 96: Overdubbing</div>
                            <div class="week-item" onclick="showWeek(97)">Week 97: Playing with Band</div>
                            <div class="week-item" onclick="showWeek(98)">Week 98: Communication</div>
                            <div class="week-item" onclick="showWeek(99)">Week 99: Country/Southern Rock</div>
                            <div class="week-item" onclick="showWeek(100)">Week 100: Funk/Alternative</div>
                            <div class="week-item" onclick="showWeek(101)">Week 101: "Comfortably Numb"</div>
                            <div class="week-item" onclick="showWeek(102)">Week 102: "Stairway to Heaven"</div>
                            <div class="week-item" onclick="showWeek(103)">Week 103: Self-Assessment</div>
                            <div class="week-item" onclick="showWeek(104)">Week 104: Finding Your Voice</div>
                        </div>
                    </div>
                </div>
            </aside>

            <main class="content-area">
                <!-- Overview Content -->
                <div id="overview" class="overview-content">
                    <div class="overview-section">
                        <h2>üéØ Curriculum Overview</h2>
                        <p>Welcome to the comprehensive 2-year electric guitar curriculum designed specifically for blues and rock music. This systematic approach will take you from complete beginner to advanced intermediate player with strong musical foundation and performance skills.</p>
                    </div>

                    <div class="phase-overview">
                        <h3>üìà Learning Progression</h3>
                        <ul>
                            <li><strong>Year 1:</strong> Foundation building with essential chords, scales, techniques, and songs</li>
                            <li><strong>Year 2:</strong> Advanced techniques, theory application, and performance mastery</li>
                            <li><strong>Daily Practice:</strong> Progresses from 20 minutes to 90 minutes as skills develop</li>
                            <li><strong>Weekly Structure:</strong> New concepts, technical development, and musical application</li>
                        </ul>
                    </div>

                    <div class="phase-overview">
                        <h3>üé∏ Year 1: Foundation Building</h3>
                        <ul>
                            <li><strong>Phase 1 (Weeks 1-8):</strong> Basic chords, power chords, and 12-bar blues</li>
                            <li><strong>Phase 2 (Weeks 9-16):</strong> Pentatonic scales and basic lead techniques</li>
                            <li><strong>Phase 3 (Weeks 17-24):</strong> Barre chords and advanced rhythm patterns</li>
                            <li><strong>Phase 4 (Weeks 25-32):</strong> Lead development with bending, vibrato, and legato</li>
                            <li><strong>Phase 5 (Weeks 33-40):</strong> Song application and performance skills</li>
                            <li><strong>Phase 6 (Weeks 41-52):</strong> Music theory and intermediate preparation</li>
                        </ul>
                    </div>

                    <div class="phase-overview">
                        <h3>üöÄ Year 2: Intermediate Development</h3>
                        <ul>
                            <li><strong>Phase 7 (Weeks 53-60):</strong> Advanced rhythm techniques and fingerpicking</li>
                            <li><strong>Phase 8 (Weeks 61-68):</strong> Complete scale mastery and improvisation</li>
                            <li><strong>Phase 9 (Weeks 69-76):</strong> Master-level lead techniques and expression</li>
                            <li><strong>Phase 10 (Weeks 77-84):</strong> Complex song integration and arrangement</li>
                            <li><strong>Phase 11 (Weeks 85-92):</strong> Music theory application and composition</li>
                            <li><strong>Phase 12 (Weeks 93-104):</strong> Performance mastery and finding your voice</li>
                        </ul>
                    </div>

                    <div class="phase-overview">
                        <h3>üéØ Key Milestones</h3>
                        <ul>
                            <li><strong>Week 13:</strong> Record 12-bar blues with basic lead</li>
                            <li><strong>Week 26:</strong> Perform 3 complete songs (rhythm + lead)</li>
                            <li><strong>Week 39:</strong> Participate in jam session</li>
                            <li><strong>Week 52:</strong> 30-minute solo performance</li>
                            <li><strong>Week 78:</strong> Master-level song performance</li>
                            <li><strong>Week 104:</strong> Complete artistic statement</li>
                        </ul>
                    </div>

                    <div class="phase-overview">
                        <h3>üé∏ Getting Started</h3>
                        <ul>
                            <li><strong>Equipment Needed:</strong> Electric guitar, amplifier, guitar cable, picks, and metronome (or app)</li>
                            <li><strong>Practice Space:</strong> Quiet area where you can practice regularly without interruption</li>
                            <li><strong>Recording:</strong> Phone or computer for recording progress at milestone weeks</li>
                            <li><strong>Patience:</strong> Remember that muscle memory takes time to develop</li>
                        </ul>
                    </div>

                    <div class="phase-overview">
                        <h3>üé∂ Learning Philosophy</h3>
                        <ul>
                            <li><strong>Quality over Quantity:</strong> 20 minutes of focused practice beats 2 hours of distracted playing</li>
                            <li><strong>Consistency:</strong> Daily practice, even if brief, builds better habits than sporadic long sessions</li>
                            <li><strong>Musical Expression:</strong> Technical skills serve musical expression, not the other way around</li>
                            <li><strong>Personal Style:</strong> Use this curriculum as a foundation to develop your unique voice</li>
                            <li><strong>Patience with Progress:</strong> Some weeks will feel easier than others - that's normal</li>
                        </ul>
                    </div>

                    <div class="phase-overview">
                        <h3>üèÜ Success Tips</h3>
                        <ul>
                            <li><strong>Record Yourself:</strong> Regular recordings help track progress and identify areas for improvement</li>
                            <li><strong>Play with Others:</strong> Jam sessions and playing with other musicians accelerates learning</li>
                            <li><strong>Listen Actively:</strong> Study the music you want to play - really listen to how it's constructed</li>
                            <li><strong>Be Patient:</strong> Some techniques take months to develop properly - don't rush the process</li>
                            <li><strong>Have Fun:</strong> If you're not enjoying it, adjust your approach or take a short break</li>
                        </ul>
                    </div>

                    <div class="phase-overview">
                        <h3>üìÖ Time Management</h3>
                        <ul>
                            <li><strong>Daily Practice:</strong> Try to practice at the same time each day to build a habit</li>
                            <li><strong>Break Time:</strong> Take a 5-minute break every 20-30 minutes to avoid fatigue</li>
                            <li><strong>Weekly Reviews:</strong> Spend time each week reviewing what you've learned</li>
                            <li><strong>Flexibility:</strong> If a week feels too challenging, spend extra time on it before moving forward</li>
                        </ul>
                    </div>

                    <div class="phase-overview">
                        <h3>üí≠ Final Thoughts</h3>
                        <p>This curriculum represents a comprehensive path to guitar mastery, but remember that music is ultimately about expression and joy. Use these lessons as a foundation, but don't be afraid to explore your own musical interests along the way. The goal isn't just to complete 104 weeks of lessons - it's to develop into a confident, expressive musician who can communicate through the guitar.</p>
                        
                        <p style="margin-top: 1rem;"><strong>Good luck on your musical journey! üé∏üéµ</strong></p>
                    </div>
                </div>

                <!-- Week Content Template -->
                <div id="week1" class="week-content">
                    <div class="week-header">
                        <div class="week-title">Week 1: Basic Setup & E Major Chord</div>
                        <div class="week-subtitle">Foundation Building - Getting Started</div>
                    </div>

                    <div class="timer-settings">
                        <h5>‚è≤Ô∏è Quick Timer</h5>
                        <p>Start a practice timer for any duration:</p>
                        <div class="timer-presets">
                            <button class="preset-btn" onclick="startQuickTimer(5)">5 min</button>
                            <button class="preset-btn" onclick="startQuickTimer(10)">10 min</button>
                            <button class="preset-btn" onclick="startQuickTimer(15)">15 min</button>
                            <button class="preset-btn" onclick="startQuickTimer(20)">20 min</button>
                            <button class="preset-btn" onclick="startQuickTimer(25)">25 min</button>
                            <button class="preset-btn" onclick="startQuickTimer(30)">30 min</button>
                        </div>
                        <div style="margin-top: 0.5rem;">
                            <input type="number" id="customTimer" placeholder="Custom minutes" min="1" max="120" style="width: 120px; padding: 0.3rem; margin-right: 0.5rem;">
                            <button class="timer-btn" onclick="startCustomTimer()">Start Custom</button>
                        </div>
                    </div>

                    <div class="practice-section" style="background: linear-gradient(135deg, #74b9ff, #0984e3);">
                        <h4 style="color: white; margin-bottom: 1rem;">üéµ Built-in Metronome</h4>
                        <div style="display: flex; align-items: center; gap: 1rem; flex-wrap: wrap;">
                            <div id="metronome-flash" style="width: 60px; height: 60px; border-radius: 50%; background: #e9ecef; border: 3px solid white; transition: background 0.1s;"></div>
                            <div style="color: white;">
                                <div style="font-size: 2rem; font-weight: bold;"><span id="metronome-bpm">60</span> BPM</div>
                                <div style="margin: 0.5rem 0;">
                                    <button onclick="setBPM(metronome.bpm - 5)" class="timer-btn">-5</button>
                                    <button onclick="setBPM(metronome.bpm - 1)" class="timer-btn">-1</button>
                                    <button onclick="setBPM(metronome.bpm + 1)" class="timer-btn">+1</button>
                                    <button onclick="setBPM(metronome.bpm + 5)" class="timer-btn">+5</button>
                                </div>
                                <div>
                                    <button id="metronome-start" onclick="startMetronome()" class="timer-btn">‚ñ∂Ô∏è Start</button>
                                    <button id="metronome-stop" onclick="stopMetronome()" class="timer-btn" disabled>‚èπÔ∏è Stop</button>
                                </div>
                            </div>
                            <div style="color: white; font-size: 0.9rem; flex: 1; min-width: 200px;">
                                <strong>Quick BPMs:</strong><br>
                                <button onclick="setBPM(60)" class="preset-btn" style="color: white; border-color: white;">60 (Slow)</button>
                                <button onclick="setBPM(80)" class="preset-btn" style="color: white; border-color: white;">80 (Medium)</button>
                                <button onclick="setBPM(100)" class="preset-btn" style="color: white; border-color: white;">100 (Fast)</button>
                                <button onclick="setBPM(120)" class="preset-btn" style="color: white; border-color: white;">120 (Rock)</button>
                            </div>
                        </div>
                    </div>

                    <div class="practice-section" style="background: linear-gradient(135deg, #fd79a8, #e84393);">
                        <h4 style="color: white; margin-bottom: 1rem;">üéº Guitar Tuner</h4>
                        <div style="color: white;">
                            <p style="margin-bottom: 1rem;">Click on a string to hear the reference pitch:</p>
                            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.5rem; margin-bottom: 1rem;">
                                <button onclick="playReferencePitch(82.41)" class="timer-btn">E (Low)</button>
                                <button onclick="playReferencePitch(110.00)" class="timer-btn">A</button>
                                <button onclick="playReferencePitch(146.83)" class="timer-btn">D</button>
                                <button onclick="playReferencePitch(196.00)" class="timer-btn">G</button>
                                <button onclick="playReferencePitch(246.94)" class="timer-btn">B</button>
                                <button onclick="playReferencePitch(329.63)" class="timer-btn">E (High)</button>
                            </div>
                            <p style="font-size: 0.9rem; opacity: 0.9;">Tune each string to match the reference pitch. Use a physical tuner for more precision.</p>
                        </div>
                    </div>

                    <div class="practice-section">
                        <h4>üéº Chord Diagrams</h4>
                        <div class="chord-diagram">
                            <h5>E Major</h5>
                            <pre>E Major:
   0 2 2 1 0 0
   | | | | | |
   E A D G B E
   
   e |---|---|---|
   B |---|---|---|
   G |-‚óè-|---|---|
   D |---|-‚óè-|---|
   A |---|-‚óè-|---|
   E |---|---|---|
      1   2   3</pre>
                        </div>
                    </div>

                    <div class="practice-section">
                        <h4>üéØ Daily Practice Routine (20-25 minutes)</h4>
                        
                        <div class="practice-item">
                            <div class="practice-time">Setup & Posture (5 minutes)</div>
                            <p>Guitar strap height, sitting/standing position, pick grip (hold between thumb and index finger, firm but not tense)</p>
                            <div class="practice-timer">
                                <h5>Setup & Posture (5 min)</h5>
                                <div class="progress-ring">
                                    <svg class="progress-ring" width="60" height="60">
                                        <circle class="progress-ring-circle" cx="30" cy="30" r="30"></circle>
                                        <circle class="progress-ring-progress" id="timer-ring-1-0" cx="30" cy="30" r="30"></circle>
                                    </svg>
                                </div>
                                <div class="timer-display" id="timer-display-1-0">5:00</div>
                                <div class="timer-controls">
                                    <button class="timer-btn" id="timer-start-1-0" onclick="startTimer('1-0')">‚ñ∂Ô∏è Start</button>
                                    <button class="timer-btn" id="timer-pause-1-0" onclick="pauseTimer('1-0')" disabled>‚è∏Ô∏è Pause</button>
                                    <button class="timer-btn" id="timer-stop-1-0" onclick="stopTimer('1-0')" disabled>‚èπÔ∏è Stop</button>
                                </div>
                            </div>
                        </div>

                        <div class="practice-item">
                            <div class="practice-time">Fretting Hand Exercise (5 minutes)</div>
                            <p>One finger per fret exercise (1st finger 1st fret, 2nd finger 2nd fret, etc.) on 6th string</p>
                            <div class="practice-timer">
                                <h5>Fretting Hand Exercise (5 min)</h5>
                                <div class="progress-ring">
                                    <svg class="progress-ring" width="60" height="60">
                                        <circle class="progress-ring-circle" cx="30" cy="30" r="30"></circle>
                                        <circle class="progress-ring-progress" id="timer-ring-1-1" cx="30" cy="30" r="30"></circle>
                                    </svg>
                                </div>
                                <div class="timer-display" id="timer-display-1-1">5:00</div>
                                <div class="timer-controls">
                                    <button class="timer-btn" id="timer-start-1-1" onclick="startTimer('1-1')">‚ñ∂Ô∏è Start</button>
                                    <button class="timer-btn" id="timer-pause-1-1" onclick="pauseTimer('1-1')" disabled>‚è∏Ô∏è Pause</button>
                                    <button class="timer-btn" id="timer-stop-1-1" onclick="stopTimer('1-1')" disabled>‚èπÔ∏è Stop</button>
                                </div>
                            </div>
                        </div>

                        <div class="practice-item">
                            <div class="practice-time">E Major Chord (10 minutes)</div>
                            <p>Finger placement: 1st finger 3rd fret 5th string, 2nd finger 2nd fret 4th string, 3rd finger 1st fret 3rd string<br>
                            Practice: 4 beats hold, 4 beats rest, repeat 20 times<br>
                            Check each string rings clearly</p>
                            <div class="practice-timer">
                                <h5>E Major Chord (10 min)</h5>
                                <div class="progress-ring">
                                    <svg class="progress-ring" width="60" height="60">
                                        <circle class="progress-ring-circle" cx="30" cy="30" r="30"></circle>
                                        <circle class="progress-ring-progress" id="timer-ring-1-2" cx="30" cy="30" r="30"></circle>
                                    </svg>
                                </div>
                                <div class="timer-display" id="timer-display-1-2">10:00</div>
                                <div class="timer-controls">
                                    <button class="timer-btn" id="timer-start-1-2" onclick="startTimer('1-2')">‚ñ∂Ô∏è Start</button>
                                    <button class="timer-btn" id="timer-pause-1-2" onclick="pauseTimer('1-2')" disabled>‚è∏Ô∏è Pause</button>
                                    <button class="timer-btn" id="timer-stop-1-2" onclick="stopTimer('1-2')" disabled>‚èπÔ∏è Stop</button>
                                </div>
                            </div>
                        </div>

                        <div class="practice-item">
                            <div class="practice-time">Cool Down (5 minutes)</div>
                            <p>Gentle finger stretches, shake out tension</p>
                            <div class="practice-timer">
                                <h5>Cool Down (5 min)</h5>
                                <div class="progress-ring">
                                    <svg class="progress-ring" width="60" height="60">
                                        <circle class="progress-ring-circle" cx="30" cy="30" r="30"></circle>
                                        <circle class="progress-ring-progress" id="timer-ring-1-3" cx="30" cy="30" r="30"></circle>
                                    </svg>
                                </div>
                                <div class="timer-display" id="timer-display-1-3">5:00</div>
                                <div class="timer-controls">
                                    <button class="timer-btn" id="timer-start-1-3" onclick="startTimer('1-3')">‚ñ∂Ô∏è Start</button>
                                    <button class="timer-btn" id="timer-pause-1-3" onclick="pauseTimer('1-3')" disabled>‚è∏Ô∏è Pause</button>
                                    <button class="timer-btn" id="timer-stop-1-3" onclick="stopTimer('1-3')" disabled>‚èπÔ∏è Stop</button>
                                </div>
                            </div>
                        </div>
                        
                        <div style="margin-top: 1.5rem; padding: 1rem; background: #e8f5e8; border-radius: 6px; border: 1px solid #c3e6c3;">
                            <h5 style="color: #27ae60; margin-bottom: 0.5rem;">üéØ Full Session Timer</h5>
                            <p style="margin-bottom: 1rem;">Practice the entire 20-25 minute session:</p>
                            <div class="practice-timer">
                                <h5>Complete 20-25 min Session</h5>
                                <div class="progress-ring">
                                    <svg class="progress-ring" width="60" height="60">
                                        <circle class="progress-ring-circle" cx="30" cy="30" r="30"></circle>
                                        <circle class="progress-ring-progress" id="timer-ring-1-full" cx="30" cy="30" r="30"></circle>
                                    </svg>
                                </div>
                                <div class="timer-display" id="timer-display-1-full">25:00</div>
                                <div class="timer-controls">
                                    <button class="timer-btn" id="timer-start-1-full" onclick="startTimer('1-full')">‚ñ∂Ô∏è Start</button>
                                    <button class="timer-btn" id="timer-pause-1-full" onclick="pauseTimer('1-full')" disabled>‚è∏Ô∏è Pause</button>
                                    <button class="timer-btn" id="timer-stop-1-full" onclick="stopTimer('1-full')" disabled>‚èπÔ∏è Stop</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="goals-section">
                        <h5>üéØ Goals for This Week</h5>
                        <p>Clean E major chord, proper posture established</p>
                    </div>

                    <div class="track-info">
                        <h5>‚ö†Ô∏è Common Issues</h5>
                        <p>Muted strings (press harder, curve fingers), buzzing (check finger placement)</p>
                    </div>

                    <div class="practice-section" style="background: #e8f5e8; border-color: #c3e6c3;">
                        <h4>üí≠ Weekly Practice Tips</h4>
                        <p>Start with short practice sessions. Quality over quantity - 15 minutes of focused practice beats an hour of distracted noodling.</p>
                    </div>

                    <button class="complete-week-btn" onclick="completeWeek(1)">‚úÖ Complete Week 1</button>

                    <div class="week-navigation">
                        <button class="nav-btn" disabled>‚Üê Previous Week</button>
                        <button class="nav-btn" onclick="showWeek(2)">Next Week ‚Üí</button>
                    </div>
                </div>

                <!-- Additional week content will be dynamically generated -->
            </main>
        </div>
        
        <!-- Week Progress Indicator -->
        <div class="week-progress" id="weekProgress" onclick="goToCurrentWeek()" title="Go to current week">
            <span id="weekProgressText">1</span>
        </div>

        <!-- Footer -->
        <footer style="background: #2c3e50; color: white; text-align: center; padding: 2rem; margin-top: 2rem;">
            <div style="max-width: 800px; margin: 0 auto;">
                <h3 style="margin-bottom: 1rem;">üé∏ 2-Year Guitar Curriculum</h3>
                <p style="margin-bottom: 1rem; opacity: 0.9;">
                    A comprehensive learning path from beginner to advanced intermediate guitarist with blues/rock focus.
                </p>
                <div style="border-top: 1px solid rgba(255,255,255,0.2); padding-top: 1rem; font-size: 0.9rem; opacity: 0.8;">
                    <p>Built with passion for guitar education | Practice consistently, play with heart üéµ</p>
                </div>
            </div>
        </footer>
    </div>

    <script>
        // Core Variables
        let currentWeek = 1;
        let completedWeeks = JSON.parse(safeLocalStorageGet('completedWeeks', '[]'));
        let activeTimers = {};
        let sessionStartTime = null;
        let searchTerm = '';
        let phaseFilter = '';

        // Metronome object
        const metronome = {
            audioContext: null,
            isPlaying: false,
            bpm: 60,
            intervalId: null,

            async initialize() {
                try {
                    this.audioContext = new (window.AudioContext || window.webkitAudioContext)();
                    return true;
                } catch (error) {
                    console.log('Audio context not available:', error);
                    return false;
                }
            },

            createClickSound() {
                if (!this.audioContext) return;
                
                try {
                    const oscillator = this.audioContext.createOscillator();
                    const gainNode = this.audioContext.createGain();
                    
                    oscillator.connect(gainNode);
                    gainNode.connect(this.audioContext.destination);
                    
                    oscillator.frequency.value = 800;
                    oscillator.type = 'square';
                    
                    gainNode.gain.setValueAtTime(0.1, this.audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.001, this.audioContext.currentTime + 0.1);
                    
                    oscillator.start(this.audioContext.currentTime);
                    oscillator.stop(this.audioContext.currentTime + 0.1);
                } catch (error) {
                    console.log('Error creating click sound:', error);
                }
            },

            start() {
                if (this.isPlaying) return;
                
                this.isPlaying = true;
                const interval = (60 / this.bpm) * 1000;
                
                this.intervalId = setInterval(() => {
                    this.createClickSound();
                    this.flashMetronome();
                }, interval);
                
                this.updateMetronomeControls();
            },

            stop() {
                this.isPlaying = false;
                if (this.intervalId) {
                    clearInterval(this.intervalId);
                    this.intervalId = null;
                }
                this.updateMetronomeControls();
            },

            setBPM(newBPM) {
                this.bpm = Math.max(40, Math.min(200, newBPM));
                if (this.isPlaying) {
                    this.stop();
                    this.start();
                }
                this.updateBPMDisplay();
            },

            flashMetronome() {
                const flash = document.getElementById('metronome-flash');
                if (flash) {
                    flash.style.background = '#ff6b6b';
                    setTimeout(() => {
                        flash.style.background = '#e9ecef';
                    }, 100);
                }
            },

            updateMetronomeControls() {
                const startBtn = document.getElementById('metronome-start');
                const stopBtn = document.getElementById('metronome-stop');
                
                if (startBtn) startBtn.disabled = this.isPlaying;
                if (stopBtn) stopBtn.disabled = !this.isPlaying;
            },

            updateBPMDisplay() {
                const display = document.getElementById('metronome-bpm');
                if (display) display.textContent = this.bpm;
            }
        };

        // Chord diagrams
        const chordDiagrams = {
            'E major': `E Major:
   0 2 2 1 0 0
   | | | | | |
   E A D G B E
   
   e |---|---|---|
   B |---|---|---|
   G |-‚óè-|---|---|
   D |---|-‚óè-|---|
   A |---|-‚óè-|---|
   E |---|---|---|
      1   2   3`,
            
            'A major': `A Major:
   X 0 2 2 2 0
   | | | | | |
   E A D G B E
   
   e |---|---|---|
   B |---|-‚óè-|---|
   G |---|-‚óè-|---|
   D |---|-‚óè-|---|
   A |---|---|---|
   E | X |---|---|
      1   2   3`,
            
            'D major': `D Major:
   X X 0 2 3 2
   | | | | | |
   E A D G B E
   
   e |---|-‚óè-|---|
   B |---|---|-‚óè-|
   G |---|-‚óè-|---|
   D |---|---|---|
   A | X |---|---|
   E | X |---|---|
      1   2   3`,
            
            'Am': `A Minor:
   X 0 2 2 1 0
   | | | | | |
   E A D G B E
   
   e |---|---|---|
   B |-‚óè-|---|---|
   G |---|-‚óè-|---|
   D |---|-‚óè-|---|
   A |---|---|---|
   E | X |---|---|
      1   2   3`,
            
            'Em': `E Minor:
   0 2 2 0 0 0
   | | | | | |
   E A D G B E
   
   e |---|---|---|
   B |---|---|---|
   G |---|---|---|
   D |---|-‚óè-|---|
   A |---|-‚óè-|---|
   E |---|---|---|
      1   2   3`,
            
            'F major': `F Major (Barre):
   1 3 3 2 1 1
   | | | | | |
   E A D G B E
   
   e |-‚óè-|---|---| Barre 1st fret
   B |-‚óè-|---|---|
   G |---|-‚óè-|---|
   D |---|---|-‚óè-|
   A |---|---|-‚óè-|
   E |-‚óè-|---|---|
      1   2   3   4`,
            
            'A7': `A7:
   X 0 2 0 2 0
   | | | | | |
   E A D G B E
   
   e |---|---|---|
   B |---|-‚óè-|---|
   G |---|---|---|
   D |---|-‚óè-|---|
   A |---|---|---|
   E | X |---|---|
      1   2   3`,
            
            'D7': `D7:
   X X 0 2 1 2
   | | | | | |
   E A D G B E
   
   e |---|-‚óè-|---|
   B |-‚óè-|---|---|
   G |---|-‚óè-|---|
   D |---|---|---|
   A | X |---|---|
   E | X |---|---|
      1   2   3`,
            
            'E7': `E7:
   0 2 0 1 0 0
   | | | | | |
   E A D G B E
   
   e |---|---|---|
   B |---|---|---|
   G |-‚óè-|---|---|
   D |---|---|---|
   A |---|-‚óè-|---|
   E |---|---|---|
      1   2   3`
        };

        // Scale diagrams
        const scaleDiagrams = {
            'A minor pentatonic': `A Minor Pentatonic (5th position):
   
   e |---|-‚óè-|---|---|-‚óè-|
   B |---|-‚óè-|---|---|-‚óè-|
   G |---|-‚óè-|---|---|-‚óè-|
   D |---|-‚óè-|---|---|-‚óè-|
   A |---|-‚óè-|---|---|-‚óè-|
   E |---|-‚óè-|---|---|-‚óè-|
      5   6   7   8   9
   
   Pattern: 5-8, 5-7, 5-7, 5-7, 5-8, 5-8`,
            
            'E minor pentatonic': `E Minor Pentatonic (Open position):
   
   e |‚óè--|---|‚óè--|
   B |‚óè--|---|‚óè--|
   G |‚óè--|‚óè--|---|
   D |‚óè--|‚óè--|---|
   A |‚óè--|‚óè--|---|
   E |‚óè--|---|‚óè--|
      0   2   3
   
   Pattern: 0-3, 0-2, 0-2, 0-2, 0-3, 0-3`,
            
            'C major scale': `C Major Scale (Open position):
   
   e |‚óè--|‚óè--|‚óè--|
   B |-‚óè-|‚óè--|‚óè--|
   G |‚óè--|‚óè--|‚óè--|
   D |‚óè--|‚óè--|‚óè--|
   A |‚óè--|‚óè--|‚óè--|
   E |‚óè--|‚óè--|‚óè--|
      0   2   3
   
   Pattern: C-D-E-F-G-A-B-C`
        };

        // Technique tips
        const techniqueTips = {
            'bending': `Bending Technique Tips:
‚Ä¢ Use multiple fingers for support
‚Ä¢ Bend with wrist rotation, not just fingers
‚Ä¢ Practice bending to exact pitch
‚Ä¢ Start with half-step bends, progress to full steps
‚Ä¢ Listen carefully to target pitch`,
            
            'vibrato': `Vibrato Technique Tips:
‚Ä¢ Start with finger vibrato (side-to-side motion)
‚Ä¢ Keep consistent speed and width
‚Ä¢ Practice slow vibrato first
‚Ä¢ Use wrist motion for wider vibrato
‚Ä¢ Match vibrato to musical context`,
            
            'alternate picking': `Alternate Picking Tips:
‚Ä¢ Strict down-up-down-up pattern
‚Ä¢ Start slowly and build speed gradually
‚Ä¢ Keep pick angle consistent
‚Ä¢ Practice with metronome
‚Ä¢ Focus on accuracy over speed`,
            
            'barre chords': `Barre Chord Tips:
‚Ä¢ Use side of index finger, not pad
‚Ä¢ Thumb position behind 2nd fret area
‚Ä¢ Apply gradual pressure
‚Ä¢ Practice partial barre chords first
‚Ä¢ Build finger strength over time`
        };

        // Week data structure with comprehensive content
        const weekData = {
            1: {
                title: "Week 1: Basic Setup & E Major Chord",
                subtitle: "Foundation Building - Getting Started",
                practices: [
                    {
                        time: "Setup & Posture (5 minutes)",
                        description: "Guitar strap height, sitting/standing position, pick grip (hold between thumb and index finger, firm but not tense)"
                    },
                    {
                        time: "Fretting Hand Exercise (5 minutes)",
                        description: "One finger per fret exercise (1st finger 1st fret, 2nd finger 2nd fret, etc.) on 6th string"
                    },
                    {
                        time: "E Major Chord (10 minutes)",
                        description: "Finger placement: 1st finger 3rd fret 5th string, 2nd finger 2nd fret 4th string, 3rd finger 1st fret 3rd string<br>Practice: 4 beats hold, 4 beats rest, repeat 20 times<br>Check each string rings clearly"
                    },
                    {
                        time: "Cool Down (5 minutes)",
                        description: "Gentle finger stretches, shake out tension"
                    }
                ],
                goals: "Clean E major chord, proper posture established",
                issues: "Muted strings (press harder, curve fingers), buzzing (check finger placement)",
                chords: ['E major'],
                totalTime: "20-25 minutes"
            },
            2: {
                title: "Week 2: A Major Chord & First Changes",
                subtitle: "Foundation Building - Getting Started",
                practices: [
                    {
                        time: "Warm-up (5 minutes)",
                        description: "Review E major, finger independence exercises"
                    },
                    {
                        time: "A Major Chord (10 minutes)",
                        description: "Finger placement: 1st, 2nd, 3rd fingers all on 2nd fret (4th, 3rd, 2nd strings respectively)<br>Practice clean chord, strum each string individually to check clarity"
                    },
                    {
                        time: "Chord Changes (10 minutes)",
                        description: "E major to A major: Start slow (one change every 4 seconds)<br>Count: '1-2-3-4-change' repeatedly<br>Goal: 10 clean changes in a row"
                    },
                    {
                        time: "Strumming Introduction (5 minutes)",
                        description: "Simple downstrokes, all 6 strings on E major"
                    }
                ],
                goals: "Clean A major, basic E-A changes, first strumming",
                track: "Simple E-A backing track at 60 BPM",
                chords: ['A major'],
                totalTime: "25-30 minutes"
            },
            3: {
                title: "Week 3: D Major & Power Chord Introduction",
                subtitle: "Foundation Building - Getting Started",
                practices: [
                    {
                        time: "Warm-up (5 minutes)",
                        description: "E-A chord changes, aim for smoother transitions"
                    },
                    {
                        time: "D Major Chord (8 minutes)",
                        description: "Finger placement: 1st finger 2nd fret 1st string, 2nd finger 2nd fret 3rd string, 3rd finger 3rd fret 2nd string<br>Only strum strings 1-4 (avoid 5th and 6th strings)"
                    },
                    {
                        time: "Three-Chord Progression (10 minutes)",
                        description: "E-A-D progression: 4 beats each chord<br>Focus on clean changes, don't worry about speed yet"
                    },
                    {
                        time: "Power Chord Introduction (7 minutes)",
                        description: "A5 power chord: 1st finger 5th fret 6th string, 3rd finger 7th fret 5th string<br>Practice clean two-note sound, mute other strings with palm"
                    }
                ],
                goals: "Clean D major, basic three-chord progression, first power chord",
                issues: "D major - avoid hitting bottom strings, power chords - mute unwanted strings",
                chords: ['D major'],
                totalTime: "30 minutes"
            }
            // Additional weeks will be generated dynamically
        };

        // Practice Timer Class
        class PracticeTimer {
            constructor(id, duration, callback) {
                this.id = id;
                this.duration = duration * 60; // Convert to seconds
                this.remaining = this.duration;
                this.isRunning = false;
                this.isPaused = false;
                this.callback = callback;
                this.interval = null;
            }

            start() {
                if (this.isPaused) {
                    this.isPaused = false;
                } else {
                    this.remaining = this.duration;
                }
                
                this.isRunning = true;
                this.interval = setInterval(() => {
                    this.remaining--;
                    this.updateDisplay();
                    
                    if (this.remaining <= 0) {
                        this.complete();
                    }
                }, 1000);
                
                this.updateControls();
                
                // Start session timer if needed
                if (!sessionStartTime) {
                    startSessionTimer();
                }
            }

            pause() {
                this.isRunning = false;
                this.isPaused = true;
                clearInterval(this.interval);
                this.updateControls();
            }

            stop() {
                this.isRunning = false;
                this.isPaused = false;
                this.remaining = this.duration;
                clearInterval(this.interval);
                this.updateDisplay();
                this.updateControls();
            }

            complete() {
                this.isRunning = false;
                this.isPaused = false;
                clearInterval(this.interval);
                this.remaining = 0;
                this.updateDisplay();
                this.updateControls();
                
                // Play notification sound
                playNotificationSound();
                
                // Show notification
                this.showNotification();
                
                if (this.callback) {
                    this.callback();
                }
            }

            updateDisplay() {
                const minutes = Math.floor(this.remaining / 60);
                const seconds = this.remaining % 60;
                const display = document.getElementById(`timer-display-${this.id}`);
                const ring = document.getElementById(`timer-ring-${this.id}`);
                
                if (display) {
                    display.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
                }
                
                if (ring) {
                    const progress = ((this.duration - this.remaining) / this.duration) * 188.5;
                    ring.style.strokeDashoffset = 188.5 - progress;
                }
            }

            updateControls() {
                const startBtn = document.getElementById(`timer-start-${this.id}`);
                const pauseBtn = document.getElementById(`timer-pause-${this.id}`);
                const stopBtn = document.getElementById(`timer-stop-${this.id}`);
                
                if (startBtn) startBtn.disabled = this.isRunning;
                if (pauseBtn) pauseBtn.disabled = !this.isRunning;
                if (stopBtn) stopBtn.disabled = !this.isRunning && !this.isPaused;
            }

            showNotification() {
                const notification = document.createElement('div');
                notification.className = 'timer-notification';
                notification.innerHTML = `
                    <h3>‚è∞ Time's Up!</h3>
                    <p>Practice section completed!</p>
                    <button onclick="this.parentElement.remove()" class="timer-btn" style="margin-top: 1rem;">Continue</button>
                `;
                
                document.body.appendChild(notification);
                
                // Auto-remove after 5 seconds
                setTimeout(() => {
                    if (notification.parentElement) {
                        notification.remove();
                    }
                }, 5000);
            }
        }

        // Core Functions
        function safeLocalStorageGet(key, defaultValue = null) {
            try {
                return localStorage.getItem(key) || defaultValue;
            } catch (error) {
                console.error('LocalStorage get error:', error);
                return defaultValue;
            }
        }

        function safeLocalStorageSet(key, value) {
            try {
                localStorage.setItem(key, value);
                return true;
            } catch (error) {
                console.error('LocalStorage set error:', error);
                return false;
            }
        }

        function updateProgress() {
            const progressPercent = Math.round((completedWeeks.length / 104) * 100);
            document.getElementById('progressFill').style.width = progressPercent + '%';
            document.getElementById('completedWeeks').textContent = completedWeeks.length;
            document.getElementById('currentWeek').textContent = currentWeek;
            document.getElementById('progressPercent').textContent = progressPercent + '%';
            document.getElementById('weekProgressText').textContent = currentWeek;

            // Update week item classes
            for (let i = 1; i <= 104; i++) {
                const weekItem = document.querySelector(`[onclick="showWeek(${i})"]`);
                if (weekItem) {
                    weekItem.classList.remove('completed', 'current');
                    if (completedWeeks.includes(i)) {
                        weekItem.classList.add('completed');
                    } else if (i === currentWeek) {
                        weekItem.classList.add('current');
                    }
                }
            }
        }

        function showOverview() {
            // Hide all week content
            document.querySelectorAll('.week-content').forEach(content => {
                content.classList.remove('active');
            });
            
            const overview = document.getElementById('overview');
            if (overview) {
                overview.style.display = 'block';
            }
            
            // Close mobile sidebar
            if (window.innerWidth <= 768) {
                const sidebar = document.getElementById('sidebar');
                if (sidebar) {
                    sidebar.classList.remove('mobile-open');
                }
            }
        }

        function showWeek(weekNumber) {
            if (!weekNumber || weekNumber < 1 || weekNumber > 104) {
                console.error('Invalid week number:', weekNumber);
                return;
            }
            
            currentWeek = weekNumber;
            
            // Hide overview
            const overview = document.getElementById('overview');
            if (overview) {
                overview.style.display = 'none';
            }
            
            // Hide all week content
            document.querySelectorAll('.week-content').forEach(content => {
                content.classList.remove('active');
            });

            // Show specific week or create it
            let weekElement = document.getElementById(`week${weekNumber}`);
            if (!weekElement) {
                weekElement = createWeekElement(weekNumber);
            }
            
            if (weekElement) {
                weekElement.classList.add('active');
                updateProgress();
                
                // Scroll to top
                const contentArea = document.querySelector('.content-area');
                if (contentArea) {
                    contentArea.scrollTop = 0;
                }
                
                // Close mobile sidebar
                if (window.innerWidth <= 768) {
                    const sidebar = document.getElementById('sidebar');
                    if (sidebar) {
                        sidebar.classList.remove('mobile-open');
                    }
                }
            }
        }

        function createWeekElement(weekNumber) {
            const data = weekData[weekNumber] || getBasicWeekData(weekNumber);
            
            const weekElement = document.createElement('div');
            weekElement.id = `week${weekNumber}`;
            weekElement.className = 'week-content';
            
            weekElement.innerHTML = `
                <div class="week-header">
                    <div class="week-title">${data.title}</div>
                    <div class="week-subtitle">${data.subtitle}</div>
                </div>

                ${createTimerSettings()}

                ${createMetronomeWidget()}

                ${weekNumber === 1 ? createGuitarTuner() : ''}

                ${data.chords ? createChordDiagrams(data.chords) : ''}

                ${createPracticeSection(data, weekNumber)}

                ${createEquipmentRecommendations(weekNumber)}

                <div class="goals-section">
                    <h5>üéØ Goals for This Week</h5>
                    <p>${data.goals}</p>
                </div>

                ${data.essential ? `
                    <div class="goals-section" style="background: #fff3cd; border-color: #ffeaa7;">
                        <h5 style="color: #856404;">üí° Essential Point</h5>
                        <p>${data.essential}</p>
                    </div>
                ` : ''}

                ${data.issues ? `
                    <div class="track-info">
                        <h5>‚ö†Ô∏è Common Issues</h5>
                        <p>${data.issues}</p>
                    </div>
                ` : ''}

                ${data.track ? `
                    <div class="track-info">
                        <h5>üéµ Practice Track</h5>
                        <p>${data.track}</p>
                    </div>
                ` : ''}

                ${data.milestone ? `
                    <div class="milestone-highlight">
                        <h5>üèÜ Milestone Achievement</h5>
                        <p>${data.milestone}</p>
                    </div>
                ` : ''}

                ${getWeekTips(weekNumber) ? `
                    <div class="practice-section" style="background: #e8f5e8; border-color: #c3e6c3;">
                        <h4>üí≠ Weekly Practice Tips</h4>
                        <p>${getWeekTips(weekNumber)}</p>
                    </div>
                ` : ''}

                ${weekNumber % 13 === 0 ? `
                    <div class="milestone-highlight">
                        <h5>üèÜ Quarter Milestone!</h5>
                        <p>Congratulations! You've completed ${Math.floor(weekNumber/13)} quarter${weekNumber > 13 ? 's' : ''} of the curriculum. Take a moment to record yourself playing something you've learned!</p>
                    </div>
                ` : ''}

                <button class="complete-week-btn" onclick="completeWeek(${weekNumber})">
                    ${completedWeeks.includes(weekNumber) ? '‚úÖ Week Completed!' : `‚úÖ Complete Week ${weekNumber}`}
                </button>

                <div class="week-navigation">
                    <button class="nav-btn" ${weekNumber === 1 ? 'disabled' : `onclick="showWeek(${weekNumber - 1})"`}>‚Üê Previous Week</button>
                    <button class="nav-btn" ${weekNumber === 104 ? 'disabled' : `onclick="showWeek(${weekNumber + 1})"`}>Next Week ‚Üí</button>
                </div>
            `;

            document.querySelector('.content-area').appendChild(weekElement);
            return weekElement;
        }

        function getBasicWeekData(weekNumber) {
            return {
                title: `Week ${weekNumber}: Advanced Content`,
                subtitle: getWeekSubtitle(weekNumber),
                practices: [
                    {
                        time: `Practice Session (${getWeekTime(weekNumber)})`,
                        description: "Continue building on previous weeks' foundation. Focus on consistency, proper technique, and musical expression."
                    }
                ],
                goals: "Continue developing skills from this phase",
                totalTime: getWeekTime(weekNumber)
            };
        }

        function getWeekSubtitle(weekNumber) {
            if (weekNumber <= 8) return "Foundation Building - Getting Started";
            if (weekNumber <= 16) return "Scale Introduction - Foundation Building";
            if (weekNumber <= 24) return "Chord Expansion - Foundation Building";
            if (weekNumber <= 32) return "Lead Development - Foundation Building";
            if (weekNumber <= 40) return "Song Application - Foundation Building";
            if (weekNumber <= 52) return "Intermediate Preparation - Foundation Building";
            if (weekNumber <= 60) return "Advanced Rhythm - Intermediate Development";
            if (weekNumber <= 68) return "Scale Mastery - Intermediate Development";
            if (weekNumber <= 76) return "Advanced Lead - Intermediate Development";
            if (weekNumber <= 84) return "Song Complexity - Intermediate Development";
            if (weekNumber <= 92) return "Music Theory - Intermediate Development";
            return "Performance & Mastery - Intermediate Development";
        }

        function getWeekTime(weekNumber) {
            if (weekNumber <= 13) return "20-30 minutes";
            if (weekNumber <= 26) return "30-45 minutes";
            if (weekNumber <= 39) return "45-60 minutes";
            if (weekNumber <= 52) return "60+ minutes";
            if (weekNumber <= 65) return "60-70 minutes";
            if (weekNumber <= 78) return "70-75 minutes";
            if (weekNumber <= 91) return "75-80 minutes";
            return "75-90 minutes";
        }

        function getWeekTips(weekNumber) {
            const tips = {
                1: "Start with short practice sessions. Quality over quantity - 15 minutes of focused practice beats an hour of distracted noodling.",
                5: "Playing in time is the most important skill. Everything else can be sloppy, but if you're in time, it will sound musical.",
                13: "This is your first milestone! You now know two pentatonic positions. This opens up a huge range of the fretboard.",
                25: "Bending is what gives guitar its voice. Take your time developing this technique - it separates guitar from other instruments.",
                26: "This week marks the halfway point of Year 1! You've built a solid foundation and are ready for more advanced techniques.",
                39: "You can now combine rhythm and lead playing! This is a major milestone - most guitarists struggle with this integration.",
                52: "Congratulations on completing Year 1! You've transformed from beginner to solid intermediate player.",
                61: "You now have access to the entire fretboard with pentatonic scales. This is where real improvisation begins.",
                78: "This song represents master-level integration. If you can play this well, you're approaching advanced status.",
                104: "You've completed two years of dedicated study! You're now an advanced intermediate player with a solid foundation for continued growth."
            };
            return tips[weekNumber] || null;
        }

        function createTimerSettings() {
            return `
                <div class="timer-settings">
                    <h5>‚è≤Ô∏è Quick Timer</h5>
                    <p>Start a practice timer for any duration:</p>
                    <div class="timer-presets">
                        <button class="preset-btn" onclick="startQuickTimer(5)">5 min</button>
                        <button class="preset-btn" onclick="startQuickTimer(10)">10 min</button>
                        <button class="preset-btn" onclick="startQuickTimer(15)">15 min</button>
                        <button class="preset-btn" onclick="startQuickTimer(20)">20 min</button>
                        <button class="preset-btn" onclick="startQuickTimer(25)">25 min</button>
                        <button class="preset-btn" onclick="startQuickTimer(30)">30 min</button>
                    </div>
                    <div style="margin-top: 0.5rem;">
                        <input type="number" id="customTimer" placeholder="Custom minutes" min="1" max="120" style="width: 120px; padding: 0.3rem; margin-right: 0.5rem;">
                        <button class="timer-btn" onclick="startCustomTimer()">Start Custom</button>
                    </div>
                </div>
            `;
        }

        function createMetronomeWidget() {
            return `
                <div class="practice-section" style="background: linear-gradient(135deg, #74b9ff, #0984e3);">
                    <h4 style="color: white; margin-bottom: 1rem;">üéµ Built-in Metronome</h4>
                    <div style="display: flex; align-items: center; gap: 1rem; flex-wrap: wrap;">
                        <div id="metronome-flash" style="width: 60px; height: 60px; border-radius: 50%; background: #e9ecef; border: 3px solid white; transition: background 0.1s;"></div>
                        <div style="color: white;">
                            <div style="font-size: 2rem; font-weight: bold;"><span id="metronome-bpm">60</span> BPM</div>
                            <div style="margin: 0.5rem 0;">
                                <button onclick="setBPM(metronome.bpm - 5)" class="timer-btn">-5</button>
                                <button onclick="setBPM(metronome.bpm - 1)" class="timer-btn">-1</button>
                                <button onclick="setBPM(metronome.bpm + 1)" class="timer-btn">+1</button>
                                <button onclick="setBPM(metronome.bpm + 5)" class="timer-btn">+5</button>
                            </div>
                            <div>
                                <button id="metronome-start" onclick="startMetronome()" class="timer-btn">‚ñ∂Ô∏è Start</button>
                                <button id="metronome-stop" onclick="stopMetronome()" class="timer-btn" disabled>‚èπÔ∏è Stop</button>
                            </div>
                        </div>
                        <div style="color: white; font-size: 0.9rem; flex: 1; min-width: 200px;">
                            <strong>Quick BPMs:</strong><br>
                            <button onclick="setBPM(60)" class="preset-btn" style="color: white; border-color: white;">60 (Slow)</button>
                            <button onclick="setBPM(80)" class="preset-btn" style="color: white; border-color: white;">80 (Medium)</button>
                            <button onclick="setBPM(100)" class="preset-btn" style="color: white; border-color: white;">100 (Fast)</button>
                            <button onclick="setBPM(120)" class="preset-btn" style="color: white; border-color: white;">120 (Rock)</button>
                        </div>
                    </div>
                </div>
            `;
        }

        function createGuitarTuner() {
            return `
                <div class="practice-section" style="background: linear-gradient(135deg, #fd79a8, #e84393);">
                    <h4 style="color: white; margin-bottom: 1rem;">üéº Guitar Tuner</h4>
                    <div style="color: white;">
                        <p style="margin-bottom: 1rem;">Click on a string to hear the reference pitch:</p>
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.5rem; margin-bottom: 1rem;">
                            <button onclick="playReferencePitch(82.41)" class="timer-btn">E (Low)</button>
                            <button onclick="playReferencePitch(110.00)" class="timer-btn">A</button>
                            <button onclick="playReferencePitch(146.83)" class="timer-btn">D</button>
                            <button onclick="playReferencePitch(196.00)" class="timer-btn">G</button>
                            <button onclick="playReferencePitch(246.94)" class="timer-btn">B</button>
                            <button onclick="playReferencePitch(329.63)" class="timer-btn">E (High)</button>
                        </div>
                        <p style="font-size: 0.9rem; opacity: 0.9;">Tune each string to match the reference pitch. Use a physical tuner for more precision.</p>
                    </div>
                </div>
            `;
        }

        function createChordDiagrams(chords) {
            return `
                <div class="practice-section">
                    <h4>üéº Chord Diagrams</h4>
                    ${chords.map(chord => `
                        <div class="chord-diagram">
                            <h5>${chord}</h5>
                            <pre>${chordDiagrams[chord] || 'Diagram coming soon...'}</pre>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        function createPracticeSection(data, weekNumber) {
            return `
                <div class="practice-section">
                    <h4>üéØ Daily Practice Routine (${data.totalTime})</h4>
                    
                    ${data.practices.map((practice, index) => {
                        const duration = extractDuration(practice.time);
                        return `
                            <div class="practice-item">
                                <div class="practice-time">${practice.time}</div>
                                <p>${practice.description}</p>
                                ${duration > 0 ? createPracticeTimer(`${weekNumber}-${index}`, duration, practice.time.split('(')[0].trim()) : ''}
                            </div>
                        `;
                    }).join('')}
                    
                    <div style="margin-top: 1.5rem; padding: 1rem; background: #e8f5e8; border-radius: 6px; border: 1px solid #c3e6c3;">
                        <h5 style="color: #27ae60; margin-bottom: 0.5rem;">üéØ Full Session Timer</h5>
                        <p style="margin-bottom: 1rem;">Practice the entire ${data.totalTime} session:</p>
                        ${createPracticeTimer(`${weekNumber}-full`, getTotalMinutes(data.totalTime), `Complete ${data.totalTime} Session`)}
                    </div>
                </div>
            `;
        }

        function createPracticeTimer(timerId, duration, title) {
            const timer = new PracticeTimer(timerId, duration, () => {
                suggestBreakOrNext(timerId);
            });
            
            activeTimers[timerId] = timer;
            
            return `
                <div class="practice-timer">
                    <h5>${title} (${duration} min)</h5>
                    <div class="progress-ring">
                        <svg class="progress-ring" width="60" height="60">
                            <circle class="progress-ring-circle" cx="30" cy="30" r="30"></circle>
                            <circle class="progress-ring-progress" id="timer-ring-${timerId}" cx="30" cy="30" r="30"></circle>
                        </svg>
                    </div>
                    <div class="timer-display" id="timer-display-${timerId}">${duration}:00</div>
                    <div class="timer-controls">
                        <button class="timer-btn" id="timer-start-${timerId}" onclick="startTimer('${timerId}')">‚ñ∂Ô∏è Start</button>
                        <button class="timer-btn" id="timer-pause-${timerId}" onclick="pauseTimer('${timerId}')" disabled>‚è∏Ô∏è Pause</button>
                        <button class="timer-btn" id="timer-stop-${timerId}" onclick="stopTimer('${timerId}')" disabled>‚èπÔ∏è Stop</button>
                    </div>
                </div>
            `;
        }

        function createEquipmentRecommendations(weekNumber) {
            const recommendations = {
                1: "Basic electric guitar, small practice amp (10-15 watts), guitar cable, medium picks",
                17: "Consider a metronome app or physical metronome for barre chord practice",
                25: "String lubricant can help with bending - apply sparingly to strings",
                47: "Time to explore effects! Start with a simple overdrive or distortion pedal",
                61: "A looper pedal can greatly enhance practice - record backing tracks and play over them"
            };

            if (recommendations[weekNumber]) {
                return `
                    <div class="practice-section" style="background: #f0f8ff; border-color: #add8e6;">
                        <h4>üéõÔ∏è Equipment Recommendations</h4>
                        <p>${recommendations[weekNumber]}</p>
                    </div>
                `;
            }
            return '';
        }

        function extractDuration(timeString) {
            const match = timeString.match(/\((\d+)\s*min/i);
            return match ? parseInt(match[1]) : 0;
        }

        function getTotalMinutes(timeString) {
            const match = timeString.match(/(\d+)(?:-\d+)?\s*min/i);
            return match ? parseInt(match[1]) : 30;
        }

        // Timer Functions
        function startTimer(timerId) {
            if (activeTimers[timerId]) {
                activeTimers[timerId].start();
            }
        }

        function pauseTimer(timerId) {
            if (activeTimers[timerId]) {
                activeTimers[timerId].pause();
            }
        }

        function stopTimer(timerId) {
            if (activeTimers[timerId]) {
                activeTimers[timerId].stop();
            }
        }

        function startQuickTimer(minutes) {
            const timerId = `quick-${Date.now()}`;
            const timer = new PracticeTimer(timerId, minutes, () => {
                showMessage(`${minutes}-minute timer completed!`, 'success');
            });
            
            activeTimers[timerId] = timer;
            timer.start();
            
            showMessage(`${minutes}-minute timer started!`, 'info');
        }

        function startCustomTimer() {
            const input = document.getElementById('customTimer');
            const minutes = parseInt(input.value);
            
            if (minutes && minutes > 0 && minutes <= 120) {
                startQuickTimer(minutes);
                input.value = '';
            } else {
                showMessage('Please enter a valid duration (1-120 minutes)', 'error');
            }
        }

        function startSessionTimer() {
            sessionStartTime = Date.now();
            
            // Create session timer display
            if (!document.getElementById('sessionTimer')) {
                const sessionTimer = document.createElement('div');
                sessionTimer.id = 'sessionTimer';
                sessionTimer.className = 'session-timer';
                sessionTimer.innerHTML = `
                    <h4>üìÖ Practice Session</h4>
                    <div class="timer-display" id="sessionDisplay">0:00</div>
                    <div style="font-size: 0.8rem; opacity: 0.9;">Total practice time</div>
                    <button class="timer-btn" onclick="endSession()" style="margin-top: 0.5rem;">End Session</button>
                `;
                document.body.appendChild(sessionTimer);
            }
            
            // Update session timer every second
            const sessionInterval = setInterval(() => {
                if (!sessionStartTime) {
                    clearInterval(sessionInterval);
                    return;
                }
                
                const elapsed = Math.floor((Date.now() - sessionStartTime) / 1000);
                const minutes = Math.floor(elapsed / 60);
                const seconds = elapsed % 60;
                
                const display = document.getElementById('sessionDisplay');
                if (display) {
                    display.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
                }
            }, 1000);
        }

        function endSession() {
            if (!sessionStartTime) return;
            
            const elapsed = sessionStartTime ? Math.floor((Date.now() - sessionStartTime) / 1000) : 0;
            const minutes = Math.floor(elapsed / 60);
            const seconds = elapsed % 60;
            
            // Stop all active timers
            Object.values(activeTimers).forEach(timer => {
                if (timer.stop) timer.stop();
            });
            
            // Remove session timer
            const sessionTimer = document.getElementById('sessionTimer');
            if (sessionTimer) {
                sessionTimer.remove();
            }
            
            sessionStartTime = null;
            
            // Show session summary
            if (elapsed > 60) {
                showSessionSummary(minutes, seconds);
                savePracticeSession(elapsed);
            }
        }

        function showSessionSummary(minutes, seconds) {
            const notification = document.createElement('div');
            notification.className = 'timer-notification';
            notification.innerHTML = `
                <h3>üé∏ Practice Session Complete!</h3>
                <p>Total practice time: <strong>${minutes}:${seconds.toString().padStart(2, '0')}</strong></p>
                <p>Great work! Consistency is key to improvement.</p>
                <button onclick="this.parentElement.remove()" class="timer-btn" style="margin-top: 1rem;">Awesome!</button>
            `;
            
            document.body.appendChild(notification);
        }

        function savePracticeSession(totalSeconds) {
            try {
                const today = new Date().toDateString();
                const sessions = JSON.parse(safeLocalStorageGet('practiceSessions', '{}'));
                
                if (!sessions[today]) {
                    sessions[today] = 0;
                }
                
                sessions[today] += totalSeconds;
                safeLocalStorageSet('practiceSessions', JSON.stringify(sessions));
            } catch (error) {
                console.error('Error saving practice session:', error);
            }
        }

        function suggestBreakOrNext(timerId) {
            // Simple suggestion after completing a timer
            if (Math.random() > 0.7) { // 30% chance to suggest break
                const notification = document.createElement('div');
                notification.className = 'timer-notification';
                notification.innerHTML = `
                    <h3>‚òï Take a Break?</h3>
                    <p>You've been practicing well! Consider a 2-minute break.</p>
                    <button onclick="startQuickTimer(2); this.parentElement.remove()" class="timer-btn">2 min break</button>
                    <button onclick="this.parentElement.remove()" class="timer-btn">Continue</button>
                `;
                document.body.appendChild(notification);
            }
        }

        // Metronome Functions
        function startMetronome() {
            metronome.start();
        }

        function stopMetronome() {
            metronome.stop();
        }

        function setBPM(newBPM) {
            metronome.setBPM(newBPM);
        }

        // Guitar Tuner Functions
        function playReferencePitch(frequency) {
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.value = frequency;
                oscillator.type = 'sine';
                
                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 2);
                
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 2);
            } catch (error) {
                console.log('Audio not available for tuner');
                showMessage('Audio not available. Please use a physical tuner.', 'info');
            }
        }

        // Navigation Functions
        function completeWeek(weekNumber) {
            if (!completedWeeks.includes(weekNumber)) {
                completedWeeks.push(weekNumber);
                completedWeeks.sort((a, b) => a - b);
                safeLocalStorageSet('completedWeeks', JSON.stringify(completedWeeks));
                updateProgress();
                
                // Celebration for milestone weeks
                if (weekNumber === 13 || weekNumber === 26 || weekNumber === 39 || weekNumber === 52 || weekNumber === 78 || weekNumber === 104) {
                    showMilestoneAlert(weekNumber);
                }
                
                // Show next week if available
                if (weekNumber < 104) {
                    setTimeout(() => {
                        if (confirm(`Great job completing Week ${weekNumber}! Ready to move to Week ${weekNumber + 1}?`)) {
                            showWeek(weekNumber + 1);
                        }
                    }, 500);
                } else {
                    setTimeout(() => {
                        showFinalCelebration();
                    }, 500);
                }
            }
        }

        function showMilestoneAlert(weekNumber) {
            const milestones = {
                13: "Quarter 1 Complete! üéâ You've learned basic chords and scales!",
                26: "Halfway through Year 1! üé∏ You're building solid technique!",
                39: "Almost done with Year 1! üöÄ You can now combine rhythm and lead!",
                52: "Year 1 Complete! üèÜ You're now an intermediate player!",
                78: "Master-level songs unlocked! üéµ You're approaching advanced status!",
                104: "Curriculum Complete! üåü You're now an advanced intermediate guitarist!"
            };
            
            const message = milestones[weekNumber];
            if (message) {
                const notification = document.createElement('div');
                notification.className = 'timer-notification milestone-celebration';
                notification.innerHTML = `
                    <h3>üèÜ Milestone Achieved!</h3>
                    <p>${message}</p>
                    <p>Consider recording yourself playing something you've learned!</p>
                    <button onclick="this.parentElement.remove()" class="timer-btn" style="margin-top: 1rem;">Awesome!</button>
                `;
                
                document.body.appendChild(notification);
                playNotificationSound();
            }
        }

        function showFinalCelebration() {
            const notification = document.createElement('div');
            notification.className = 'timer-notification milestone-celebration';
            notification.style.background = 'linear-gradient(135deg, #ff9a9e, #fecfef, #ffeaa7)';
            notification.innerHTML = `
                <h3>üéâ CONGRATULATIONS! üéâ</h3>
                <p>You've completed the entire 2-year guitar curriculum!</p>
                <p>You're now an advanced intermediate guitarist with the skills to:</p>
                <ul style="text-align: left; margin: 1rem 0;">
                    <li>Play complex songs and arrangements</li>
                    <li>Improvise confidently in multiple styles</li>
                    <li>Understand advanced music theory</li>
                    <li>Perform with confidence</li>
                    <li>Continue learning independently</li>
                </ul>
                <p><strong>Keep playing, keep growing! üé∏üéµ</strong></p>
                <button onclick="this.parentElement.remove()" class="timer-btn" style="margin-top: 1rem; background: #ff6b6b;">Amazing Journey!</button>
            `;
            
            document.body.appendChild(notification);
        }

        function goToCurrentWeek() {
            // Find the first incomplete week
            for (let i = 1; i <= 104; i++) {
                if (!completedWeeks.includes(i)) {
                    showWeek(i);
                    return;
                }
            }
            // If all weeks completed, go to final week
            showWeek(104);
        }

        function togglePhase(phaseId) {
            const phaseList = document.getElementById(phaseId);
            if (phaseList) {
                phaseList.classList.toggle('active');
            }
        }

        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            if (sidebar) {
                sidebar.classList.toggle('mobile-open');
            }
        }

        // Search and Filter Functions
        function setupSearchAndFilter() {
            const searchInput = document.getElementById('searchInput');
            const phaseFilterSelect = document.getElementById('phaseFilter');
            
            if (searchInput) {
                searchInput.addEventListener('input', function(e) {
                    searchTerm = e.target.value.toLowerCase();
                    filterWeeks();
                });
            }
            
            if (phaseFilterSelect) {
                phaseFilterSelect.addEventListener('change', function(e) {
                    phaseFilter = e.target.value;
                    filterWeeks();
                });
            }
        }

        function filterWeeks() {
            document.querySelectorAll('.week-item').forEach(item => {
                const weekText = item.textContent.toLowerCase();
                const weekNumber = parseInt(item.getAttribute('onclick').match(/\d+/)[0]);
                
                const matchesSearch = !searchTerm || weekText.includes(searchTerm);
                const matchesPhase = !phaseFilter || isInPhaseRange(weekNumber, phaseFilter);
                
                item.style.display = (matchesSearch && matchesPhase) ? 'block' : 'none';
            });
        }

        function isInPhaseRange(weekNumber, range) {
            if (!range) return true;
            const [start, end] = range.split('-').map(Number);
            return weekNumber >= start && weekNumber <= end;
        }

        function clearFilters() {
            document.getElementById('searchInput').value = '';
            document.getElementById('phaseFilter').value = '';
            searchTerm = '';
            phaseFilter = '';
            filterWeeks();
        }

        // Modal Functions
        function showProgressStats() {
            const stats = getWeekStats();
            const totalPracticeTime = getTotalPracticeTime();
            
            const modal = createModal('üìä Your Progress Stats', `
                <div style="margin-bottom: 1rem;">
                    <div class="stats-grid">
                        <div class="stat-item" style="background: #3498db; color: white; padding: 1rem; border-radius: 6px;">
                            <span class="stat-number">${stats.daysSinceStart}</span>
                            <span class="stat-label">Days Practicing</span>
                        </div>
                        <div class="stat-item" style="background: #27ae60; color: white; padding: 1rem; border-radius: 6px;">
                            <span class="stat-number">${stats.completionRate}%</span>
                            <span class="stat-label">Completion</span>
                        </div>
                        <div class="stat-item" style="background: #f39c12; color: white; padding: 1rem; border-radius: 6px;">
                            <span class="stat-number">${formatTotalTime(totalPracticeTime)}</span>
                            <span class="stat-label">Total Practice</span>
                        </div>
                    </div>
                </div>
                <p><strong>Expected Week:</strong> ${stats.expectedWeek}</p>
                <p><strong>Current Week:</strong> ${stats.actualWeek}</p>
                <p><strong>Status:</strong> ${stats.isAhead ? 'üöÄ Ahead of schedule!' : stats.isBehind ? '‚è∞ Consider catching up' : 'üëç Right on track!'}</p>
            `);
        }

        function showPracticeLog() {
            const sessions = JSON.parse(safeLocalStorageGet('practiceSessions', '{}'));
            const last7Days = getLast7Days();
            
            let logHtml = '<div style="margin: 1rem 0;">';
            let totalWeekTime = 0;
            
            last7Days.forEach(date => {
                const dayTime = sessions[date] || 0;
                totalWeekTime += dayTime;
                const formattedTime = formatTime(dayTime);
                const dayName = new Date(date).toLocaleDateString('en-US', { weekday: 'short' });
                
                logHtml += `
                    <div class="progress-log-day">
                        <span>${dayName} - ${date}</span>
                        <span class="${dayTime > 0 ? 'practice-time-badge' : 'no-practice-badge'}">
                            ${formattedTime || 'No practice'}
                        </span>
                    </div>
                `;
            });
            
            logHtml += `
                </div>
                <div style="margin-top: 1rem; padding: 1rem; background: #e8f5e8; border-radius: 6px;">
                    <strong>Weekly Total: ${formatTime(totalWeekTime)}</strong><br>
                    <small>Average: ${formatTime(Math.floor(totalWeekTime / 7))} per day</small>
                </div>
            `;
            
            createModal('üìà Practice Log - Last 7 Days', logHtml);
        }

        function showGoalSetting() {
            const currentGoals = {
                dailyTarget: safeLocalStorageGet('dailyTarget', '30'),
                focusArea: safeLocalStorageGet('focusArea', 'technique'),
                personalGoal: safeLocalStorageGet('personalGoal', '')
            };

            const modal = createModal('üéØ Set Your Practice Goals', `
                <form onsubmit="saveGoals(event)">
                    <div class="form-group">
                        <label for="dailyTarget">Daily Practice Target (minutes):</label>
                        <input type="number" id="dailyTarget" value="${currentGoals.dailyTarget}" min="5" max="180" required>
                    </div>
                    <div class="form-group">
                        <label for="focusArea">Current Focus Area:</label>
                        <select id="focusArea" required>
                            <option value="technique" ${currentGoals.focusArea === 'technique' ? 'selected' : ''}>Technique Development</option>
                            <option value="chords" ${currentGoals.focusArea === 'chords' ? 'selected' : ''}>Chord Mastery</option>
                            <option value="scales" ${currentGoals.focusArea === 'scales' ? 'selected' : ''}>Scale Practice</option>
                            <option value="songs" ${currentGoals.focusArea === 'songs' ? 'selected' : ''}>Song Learning</option>
                            <option value="improvisation" ${currentGoals.focusArea === 'improvisation' ? 'selected' : ''}>Improvisation</option>
                            <option value="theory" ${currentGoals.focusArea === 'theory' ? 'selected' : ''}>Music Theory</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="personalGoal">Personal Goal (optional):</label>
                        <textarea id="personalGoal" placeholder="e.g., Learn to play my favorite song, perform at open mic night...">${currentGoals.personalGoal}</textarea>
                    </div>
                    <div style="text-align: right; margin-top: 1rem;">
                        <button type="submit" class="nav-btn">Save Goals</button>
                    </div>
                </form>
            `);
        }

        function saveGoals(event) {
            event.preventDefault();
            
            try {
                const dailyTarget = document.getElementById('dailyTarget').value;
                const focusArea = document.getElementById('focusArea').value;
                const personalGoal = document.getElementById('personalGoal').value;
                
                if (!dailyTarget || dailyTarget < 5 || dailyTarget > 180) {
                    showMessage('Please enter a valid daily target (5-180 minutes)', 'error');
                    return;
                }
                
                safeLocalStorageSet('dailyTarget', dailyTarget);
                safeLocalStorageSet('focusArea', focusArea);
                safeLocalStorageSet('personalGoal', personalGoal);
                
                showMessage('Goals saved successfully! üé∏', 'success');
                
                // Close modal
                const modal = document.querySelector('.modal-overlay');
                if (modal) modal.remove();
            } catch (error) {
                console.error('Error saving goals:', error);
                showMessage('Error saving goals. Please try again.', 'error');
            }
        }

        function showTroubleshooting() {
            createModal('üîß Help & Troubleshooting Tips', `
                <div style="max-height: 400px; overflow-y: auto;">
                    <h4>üé∏ Common Guitar Issues</h4>
                    <p><strong>Buzzing strings:</strong> Check finger placement, press harder, keep fingernails short</p>
                    <p><strong>Muted strings:</strong> Curve fingers more, avoid touching other strings</p>
                    <p><strong>Pain in fretting hand:</strong> Take breaks, check thumb position, relax grip</p>
                    <p><strong>Can't reach frets:</strong> Adjust guitar position, check strap height</p>
                    
                    <h4>‚è∞ Practice Tips</h4>
                    <p><strong>No time to practice:</strong> Even 5-10 minutes daily helps maintain progress</p>
                    <p><strong>Feeling stuck:</strong> Review earlier weeks, focus on problem areas</p>
                    <p><strong>Lack of motivation:</strong> Set small goals, play songs you enjoy</p>
                    <p><strong>Progress seems slow:</strong> Record yourself monthly to hear improvement</p>
                    
                    <h4>üéµ Technical Issues</h4>
                    <p><strong>Timer not working:</strong> Refresh page, check browser permissions</p>
                    <p><strong>Audio not playing:</strong> Check volume, try different browser</p>
                    <p><strong>Progress not saving:</strong> Enable cookies, don't use private browsing</p>
                    
                    <h4>üìö Learning Resources</h4>
                    <p><strong>Need more help:</strong> Consider online lessons, local teachers, or guitar forums</p>
                    <p><strong>Want backing tracks:</strong> Search YouTube for "guitar backing tracks" in your preferred key</p>
                    <p><strong>Equipment questions:</strong> Visit local music store for hands-on advice</p>
                </div>
            `);
        }

        function createModal(title, content) {
            // Remove existing modal if any
            const existingModal = document.querySelector('.modal-overlay');
            if (existingModal) {
                existingModal.remove();
            }
            
            const modal = document.createElement('div');
            modal.className = 'modal-overlay';
            modal.innerHTML = `
                <div class="modal-content">
                    <div class="modal-header">
                        <h3>${title}</h3>
                    </div>
                    <div class="modal-body">
                        ${content}
                    </div>
                    <div class="modal-footer">
                        <button onclick="this.closest('.modal-overlay').remove()" class="nav-btn">Close</button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // Close on overlay click
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    modal.remove();
                }
            });
            
            return modal;
        }

        // Utility Functions
        function getWeekStats() {
            const now = new Date();
            const startDate = new Date(safeLocalStorageGet('startDate') || now.toISOString());
            const daysSinceStart = Math.floor((now - startDate) / (1000 * 60 * 60 * 24));
            const expectedWeek = Math.min(104, Math.floor(daysSinceStart / 7) + 1);
            
            return {
                daysSinceStart,
                expectedWeek,
                actualWeek: currentWeek,
                isAhead: currentWeek > expectedWeek,
                isBehind: currentWeek < expectedWeek,
                completionRate: Math.round((completedWeeks.length / 104) * 100)
            };
        }

        function getLast7Days() {
            const days = [];
            for (let i = 6; i >= 0; i--) {
                const date = new Date();
                date.setDate(date.getDate() - i);
                days.push(date.toDateString());
            }
            return days;
        }

        function getTotalPracticeTime() {
            const sessions = JSON.parse(safeLocalStorageGet('practiceSessions', '{}'));
            return Object.values(sessions).reduce((total, time) => total + time, 0);
        }

        function formatTotalTime(totalSeconds) {
            const hours = Math.floor(totalSeconds / 3600);
            const minutes = Math.floor((totalSeconds % 3600) / 60);
            
            if (hours > 0) {
                return `${hours}h ${minutes}m`;
            } else {
                return `${minutes}m`;
            }
        }

        function formatTime(seconds) {
            if (seconds === 0) return null;
            const minutes = Math.floor(seconds / 60);
            if (minutes >= 60) {
                const hours = Math.floor(minutes / 60);
                const remainingMinutes = minutes % 60;
                return `${hours}h ${remainingMinutes}m`;
            }
            return `${minutes}m`;
        }

        function playNotificationSound() {
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                
                // Create a pleasant notification sound
                const oscillator1 = audioContext.createOscillator();
                const oscillator2 = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator1.connect(gainNode);
                oscillator2.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                // Create a pleasant chord
                oscillator1.frequency.value = 523.25; // C5
                oscillator2.frequency.value = 659.25; // E5
                
                oscillator1.type = 'sine';
                oscillator2.type = 'sine';
                
                gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 1);
                
                oscillator1.start(audioContext.currentTime);
                oscillator2.start(audioContext.currentTime);
                oscillator1.stop(audioContext.currentTime + 1);
                oscillator2.stop(audioContext.currentTime + 1);
            } catch (error) {
                console.log('Audio notification not available:', error);
            }
        }

        function showMessage(text, type = 'info') {
            const existingMessage = document.querySelector('.error-message, .success-message, .info-message');
            if (existingMessage) {
                existingMessage.remove();
            }
            
            const message = document.createElement('div');
            message.className = `${type}-message`;
            message.textContent = text;
            
            // Auto-remove after 3 seconds
            setTimeout(() => {
                if (message.parentElement) {
                    message.remove();
                }
            }, 3000);
            
            // Allow manual dismissal
            message.addEventListener('click', () => message.remove());
            
            document.body.appendChild(message);
        }

        // Dark Mode Functions
        function initializeDarkMode() {
            try {
                // Check for saved preference or system preference
                const savedMode = safeLocalStorageGet('darkMode');
                const systemPrefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
                
                const shouldUseDark = savedMode === 'true' || (savedMode === null && systemPrefersDark);
                
                if (shouldUseDark) {
                    document.body.classList.add('dark-mode');
                    const icon = document.getElementById('darkModeIcon');
                    if (icon) icon.textContent = '‚òÄÔ∏è';
                }
                
                // Listen for system theme changes
                if (window.matchMedia) {
                    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
                        if (safeLocalStorageGet('darkMode') === null) {
                            if (e.matches) {
                                document.body.classList.add('dark-mode');
                            } else {
                                document.body.classList.remove('dark-mode');
                            }
                        }
                    });
                }
            } catch (error) {
                console.error('Dark mode initialization error:', error);
            }
        }

        function toggleDarkMode() {
            try {
                const body = document.body;
                const isDark = body.classList.toggle('dark-mode');
                safeLocalStorageSet('darkMode', isDark.toString());
                
                // Update icon
                const icon = document.getElementById('darkModeIcon');
                if (icon) {
                    icon.textContent = isDark ? '‚òÄÔ∏è' : 'üåô';
                }
                
                showMessage(`${isDark ? 'Dark' : 'Light'} mode enabled`, 'success');
            } catch (error) {
                console.error('Dark mode toggle error:', error);
                showMessage('Error toggling dark mode', 'error');
            }
        }

        // Mobile responsiveness
        function handleMobileLayout() {
            const sidebar = document.getElementById('sidebar');
            
            if (window.innerWidth <= 768) {
                if (sidebar && !sidebar.classList.contains('mobile-open')) {
                    // Mobile layout handled by CSS
                }
            } else {
                if (sidebar) {
                    sidebar.classList.remove('mobile-open');
                }
            }
        }

        // Initialize Application
        document.addEventListener('DOMContentLoaded', function() {
            try {
                console.log('üé∏ Guitar Curriculum App Starting...');
                
                // Set start date if not already set
                if (!safeLocalStorageGet('startDate')) {
                    safeLocalStorageSet('startDate', new Date().toISOString());
                }
                
                // Initialize audio tools with error handling
                metronome.initialize().catch(error => {
                    console.log('Metronome initialization failed:', error);
                });
                
                // Initialize UI
                initializeDarkMode();
                updateProgress();
                showOverview();
                setupSearchAndFilter();
                handleMobileLayout();
                
                console.log('üé∏ Guitar Curriculum App Ready!');
                showMessage('Welcome to Guitar Curriculum! üé∏', 'success');
                
            } catch (error) {
                console.error('üé∏ Initialization error:', error);
                showMessage('App initialization failed. Please refresh the page.', 'error');
            }
        });

        // Handle window resize
        window.addEventListener('resize', function() {
            try {
                handleMobileLayout();
            } catch (error) {
                console.error('Resize handler error:', error);
            }
        });

        // Clean up timers when leaving page
        window.addEventListener('beforeunload', () => {
            try {
                Object.values(activeTimers).forEach(timer => {
                    if (timer.interval) {
                        clearInterval(timer.interval);
                    }
                });
                
                if (sessionStartTime) {
                    endSession();
                }
                
                if (metronome) metronome.stop();
            } catch (error) {
                console.error('Cleanup error:', error);
            }
        });

        // Visual feedback for interactions
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('nav-btn') || 
                e.target.classList.contains('timer-btn') || 
                e.target.classList.contains('complete-week-btn')) {
                
                e.target.style.transform = 'scale(0.95)';
                setTimeout(() => {
                    e.target.style.transform = '';
                }, 150);
            }
        });
    </script>
</body>
</html>
